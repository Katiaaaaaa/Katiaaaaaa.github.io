<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Katia-blog</title><link>http://localhost:1313/</link><description>Recent content on Katia-blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 21 Oct 2020 00:00:00 +0000</lastBuildDate><atom:link href="http://localhost:1313/index.xml" rel="self" type="application/rss+xml"/><item><title>关于</title><link>http://localhost:1313/about/</link><pubDate>Sun, 20 Aug 2017 21:38:52 +0800</pubDate><guid>http://localhost:1313/about/</guid><description>&lt;p>大家好，我是张慧晴&lt;/p>
&lt;p>It makes use of a variety of open source projects including:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/spf13/cobra">Cobra&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/spf13/viper">Viper&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/spf13/jWalterWeatherman">J Walter Weatherman&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/spf13/cast">Cast&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Learn more and contribute on &lt;a href="https://github.com/gohugoio">GitHub&lt;/a>.&lt;/p></description></item><item><title>pandas 数据清洗</title><link>http://localhost:1313/post/pandas_%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E5%AE%9E%E6%88%98/</link><pubDate>Wed, 21 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/pandas_%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E5%AE%9E%E6%88%98/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>日期函数&lt;/li>
&lt;li>文本函数&lt;/li>
&lt;li>逻辑函数&lt;/li>
&lt;li>统计函数&lt;/li>
&lt;li>查找引用函数&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="数据结构">数据结构&lt;/h2>
&lt;h4 id="series-是个定长的字典序列">Series 是个定长的字典序列&lt;/h4>
&lt;ul>
&lt;li>Series 有两个基本属性:index 和 values&lt;/li>
&lt;li>index 默认是 0,1,2,……递增的整数序列，当然我们也可以自己来指定索引，比如 index=[‘a’, ‘b’, ‘c’, ‘d’]。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Series&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DataFrame&lt;/span>
&lt;span class="n">x1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Series&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="n">x2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;d&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 0 1&lt;/span>
&lt;span class="c1"># 1 2&lt;/span>
&lt;span class="c1"># 2 3&lt;/span>
&lt;span class="c1"># 3 4&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># a 1&lt;/span>
&lt;span class="c1"># b 2&lt;/span>
&lt;span class="c1"># c 3&lt;/span>
&lt;span class="c1"># d 4&lt;/span>
&lt;span class="c1"># 字典的方式创建Series&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;d&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="n">x3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span> &lt;span class="n">x3&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="dataframe-类型数据结构类似数据库表">DataFrame 类型数据结构类似数据库表。&lt;/h4>
&lt;ul>
&lt;li>Dataframe 包括了行索引和列索引，我们可以将 DataFrame 看成是由相同索引的 Series 组成的字典类型。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Series&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DataFrame&lt;/span>
&lt;span class="n">df&lt;/span>
&lt;span class="n">df1&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;ZhangFei&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;GuanYu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ZhaoYun&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;HuangZhong&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;DianWei&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;English&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Math&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span> &lt;span class="n">df1&lt;/span>
&lt;span class="k">print&lt;/span> &lt;span class="n">df2&lt;/span>
&lt;span class="c1"># English Math Chinese&lt;/span>
&lt;span class="c1"># ZhangFei 65 30 66&lt;/span>
&lt;span class="c1"># GuanYu 85 98 95&lt;/span>
&lt;span class="c1"># ZhaoYun 92 96 93&lt;/span>
&lt;span class="c1"># HuangZhong 88 77 90&lt;/span>
&lt;span class="c1"># DianWei 90 90 80&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数据导入和输出">数据导入和输出&lt;/h2>
&lt;ul>
&lt;li>Pandas 允许直接从 xlsx，csv 等文件中导入数据，也可以输出到 xlsx, csv 等文件&lt;/li>
&lt;li>需要安装 xlrd, openpyxl&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Series&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DataFrame&lt;/span>
&lt;span class="n">score&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;data.xlsx&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">score&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;data1.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span> &lt;span class="n">score&lt;/span>
&lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_csv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_csv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数据清洗">数据清洗&lt;/h2>
&lt;h3 id="1-删除-dataframe-中的不必要的列或行">1. 删除 DataFrame 中的不必要的列或行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">66&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">95&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">93&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">90&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="s1">&amp;#39;English&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">65&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">85&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">92&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">88&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">90&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="s1">&amp;#39;Math&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">98&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">96&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">77&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">90&lt;/span>&lt;span class="p">]}&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;ZhangFei&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;GuanYu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ZhaoYun&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;HuangZhong&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;DianWei&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;English&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Math&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 删除语文列&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 删除张飞行&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;ZhangFei&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-重命名列名-columns让列表名更容易识别">2. 重命名列名 columns，让列表名更容易识别&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rename&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;Yuwen&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;English&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;Yingyu&amp;#39;&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-去重复的值">3. 去重复的值&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">drop_duplicates&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-格式问题">4. 格式问题&lt;/h3>
&lt;h5 id="更改数据格式">更改数据格式&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;str&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">int64&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="数据间的空格">数据间的空格&lt;/h5>
&lt;ul>
&lt;li>有时候我们先把格式转成了 str 类型，是为了方便对数据进行操作，这时想要删除数据间的空格，我们就可以使用 strip 函数：&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 删除两边的空格&lt;/span>
&lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 删除左边空格&lt;/span>
&lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lstrip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 删除右边空格&lt;/span>
&lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rstrip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>如果数据里有某个特殊的符号，我们想要删除怎么办？同样可以使用 strip 函数，比如 Chinese 字段里有美元符号，我们想把这个删掉，可以这么写：&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Chinese&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="大小写转换">大小写转换&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 大写&lt;/span>
&lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">upper&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 小写&lt;/span>
&lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 首字母大写&lt;/span>
&lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="查找空值">查找空值&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 哪一列存在空值 &lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isnull&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">any&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="apply函数进行数据清洗">apply函数进行数据清洗&lt;/h2>
&lt;ul>
&lt;li>对 name 列的数值都进行大写转化可以用：&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 哪一列存在空值 &lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">upper&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>也可以定义个函数，在 apply 中进行使用。
比如定义 double_df 函数是将原来的数值 * 2 进行返回。然后对 df1 中的“语文”列的数值进行 * 2 处理&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="k">def&lt;/span> &lt;span class="nf">double_df&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">):&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">x&lt;/span>
&lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;语文&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;语文&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">double_df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 直接赋值新增列&lt;/span>
&lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;语文&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;语文&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;总和&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;语文&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;数学&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;英语&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>比如对于 DataFrame，我们新增两列，其中’new1’列是“语文”和“英语”成绩之和的 m 倍，&amp;lsquo;new2’列是“语文”和“英语”成绩之和的 n 倍&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="k">def&lt;/span> &lt;span class="nf">plus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">):&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;new1&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;语文&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;英语&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">m&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;new2&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;语文&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;英语&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">df&lt;/span>
&lt;span class="n">df1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">plus&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中 axis=1 代表按照列为轴进行操作，axis=0 代表按照行为轴进行操作，args 是传递的两个参数，即 n=2, m=3，在 plus 函数中使用到了 n 和 m，从而生成新的 df。&lt;/p>
&lt;h2 id="数据统计">数据统计&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="s1">&amp;#39;ZhangFei&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Guanyu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;v&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;data&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)})&lt;/span>
&lt;span class="n">df1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">describe&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># data&lt;/span>
&lt;span class="c1"># count 5.000000&lt;/span>
&lt;span class="c1"># mean 2.000000&lt;/span>
&lt;span class="c1"># std 1.581139&lt;/span>
&lt;span class="c1"># min 0.000000&lt;/span>
&lt;span class="c1"># 25% 1.000000&lt;/span>
&lt;span class="c1"># 50% 2.000000&lt;/span>
&lt;span class="c1"># 75% 3.000000&lt;/span>
&lt;span class="c1"># max 4.000000&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数据表合并">数据表合并&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="n">df1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="s1">&amp;#39;ZhangFei&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;GuanYu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;data1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)})&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="s1">&amp;#39;ZhangFei&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;GuanYu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;data2&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)})&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="1-基于指定列进行连接">1. 基于指定列进行连接&lt;/h5>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">merge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">df2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">on&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># name data1 data2&lt;/span>
&lt;span class="c1"># 0 ZhangFei 0 0&lt;/span>
&lt;span class="c1"># 1 GuanYu 1 1&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="2-inner-内连接">2. inner 内连接&lt;/h4>
&lt;p>inner 内链接是 merge 合并的默认情况，inner 内连接其实也就是键的交集，在这里 df1, df2 相同的键是 name，所以是基于 name 字段做的连接：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="n">df3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">merge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">df2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;inner&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># name data1 data2&lt;/span>
&lt;span class="c1"># 0 ZhangFei 0 0&lt;/span>
&lt;span class="c1"># 1 GuanYu 1 1&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="3-left-左连接">3. left 左连接&lt;/h4>
&lt;p>左连接是以第一个 DataFrame 为主进行的连接，第二个 DataFrame 作为补充。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="n">df3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">merge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">df2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># name data1 data2&lt;/span>
&lt;span class="c1"># 0 ZhangFei 0 0.0&lt;/span>
&lt;span class="c1"># 1 GuanYu 1 1.0&lt;/span>
&lt;span class="c1"># 2 a 2 NaN&lt;/span>
&lt;span class="c1"># 3 b 3 NaN&lt;/span>
&lt;span class="c1"># 4 c 4 NaN&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="4-right-右连接">4. right 右连接&lt;/h4>
&lt;p>右连接是以第二个 DataFrame 为主进行的连接，第一个 DataFrame 作为补充。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">merge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">df2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># name data1 data2&lt;/span>
&lt;span class="c1"># 0 ZhangFei 0.0 0&lt;/span>
&lt;span class="c1"># 1 GuanYu 1.0 1&lt;/span>
&lt;span class="c1"># 2 A NaN 2&lt;/span>
&lt;span class="c1"># 3 B NaN 3&lt;/span>
&lt;span class="c1"># 4 C NaN 4&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="5-outer-外连接">5. outer 外连接&lt;/h4>
&lt;p>外连接相当于求两个 DataFrame 的并集。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">merge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">df2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;outer&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># name data1 data2&lt;/span>
&lt;span class="c1"># 0 ZhangFei 0.0 0.0&lt;/span>
&lt;span class="c1"># 1 GuanYu 1.0 1.0&lt;/span>
&lt;span class="c1"># 2 a 2.0 NaN&lt;/span>
&lt;span class="c1"># 3 b 3.0 NaN&lt;/span>
&lt;span class="c1"># 4 c 4.0 NaN&lt;/span>
&lt;span class="c1"># 5 A NaN 2.0&lt;/span>
&lt;span class="c1"># 6 B NaN 3.0&lt;/span>
&lt;span class="c1"># 7 C NaN 4.0&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="用-sql-方式打开-pandas">用 SQL 方式打开 Pandas&lt;/h2>
&lt;ul>
&lt;li>pandasql 中的主要函数是 sqldf，它接收两个参数：一个 SQL 查询语句，还有一组环境变量 globals() 或 locals()。这样我们就可以在 Python 里，直接用 SQL 语句中对 DataFrame 进行操作&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">DataFrame&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">pandasql&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">sqldf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">load_meat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">load_births&lt;/span>
&lt;span class="n">df1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="s1">&amp;#39;ZhangFei&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;GuanYu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;data1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)})&lt;/span>
&lt;span class="n">pysqldf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">lambda&lt;/span> &lt;span class="n">sql&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sqldf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sql&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">globals&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="n">sql&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;select * from df1 where name =&amp;#39;ZhangFei&amp;#39;&amp;#34;&lt;/span>
&lt;span class="k">print&lt;/span> &lt;span class="n">pysqldf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sql&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># lambda 函数&lt;/span>
&lt;span class="k">lambda&lt;/span> &lt;span class="n">argument_list&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">expression&lt;/span>
&lt;span class="n">pysqldf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">lambda&lt;/span> &lt;span class="n">sql&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sqldf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sql&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">globals&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL题库(7)</title><link>http://localhost:1313/post/msyql-%E8%AF%95%E9%A2%9807/</link><pubDate>Tue, 20 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/msyql-%E8%AF%95%E9%A2%9807/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>union&lt;/li>
&lt;li>最值 &amp;gt;all()&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>编写一个SQL查询，报告所有雇员最多的项目。&lt;/p>
&lt;p>报告所有雇员最多的项目&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">project_id&lt;/th>
&lt;th style="text-align:center">employee_id&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">employee_id&lt;/th>
&lt;th style="text-align:center">name&lt;/th>
&lt;th style="text-align:center">experience_years&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Khaled&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Ali&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">John&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">Doe&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">project_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">project&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">project_id&lt;/span>
&lt;span class="k">HAVING&lt;/span> &lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">DISTINCT&lt;/span> &lt;span class="n">employee_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="k">ALL&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">project&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">project_id&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">project_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">project&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">project_id&lt;/span>
&lt;span class="k">HAVING&lt;/span> &lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">DISTINCT&lt;/span> &lt;span class="n">employee_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">DISTINCT&lt;/span> &lt;span class="n">employee_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">ctn&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">project&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">project_id&lt;/span>
&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">ctn&lt;/span> &lt;span class="k">DESC&lt;/span>
&lt;span class="k">LIMIT&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>每一个项目中经验最丰富的雇员是谁&lt;/p>
&lt;ol>
&lt;li>内连接两表,project_id分组,max(experience_years)&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="err">得出每个项目中&lt;/span> &lt;span class="err">最长的年限&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">experience_years&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">ctn&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="n">employee&lt;/span> &lt;span class="n">e&lt;/span> &lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">project&lt;/span> &lt;span class="n">p&lt;/span>
&lt;span class="k">on&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">project&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="err">由年限匹配员工编码&lt;/span>
&lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">和&lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">years&lt;/span> &lt;span class="err">关系在两个表中&lt;/span>
&lt;span class="err">所以要用到&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="c1">--三表链接
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="n">employee&lt;/span> &lt;span class="n">e&lt;/span> &lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">project&lt;/span> &lt;span class="n">p&lt;/span>
&lt;span class="k">on&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>
&lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">experience_years&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">ctn&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="n">employee&lt;/span> &lt;span class="n">e&lt;/span> &lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">project&lt;/span> &lt;span class="n">p&lt;/span>
&lt;span class="k">on&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">project&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">a&lt;/span>
&lt;span class="k">on&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">project_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">project_id&lt;/span>
&lt;span class="k">and&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ctn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">experience_years&lt;/span>
&lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">employee_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">--子查询两个字段匹配
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">SELECT&lt;/span>
&lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>
&lt;span class="k">FROM&lt;/span>
&lt;span class="n">Project&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">p&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Employee&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">e&lt;/span>
&lt;span class="k">ON&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">experience_years&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span>
&lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">project_id&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">MAX&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">experience_years&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">FROM&lt;/span>
&lt;span class="n">Project&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">p&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Employee&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">e&lt;/span>
&lt;span class="k">ON&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">project_id&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL实战--同比环比计算</title><link>http://localhost:1313/post/mysql-%E7%8E%AF%E6%AF%94%E5%90%8C%E6%AF%94/</link><pubDate>Mon, 19 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-%E7%8E%AF%E6%AF%94%E5%90%8C%E6%AF%94/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>sub_date 函数&lt;/li>
&lt;li>环比 同比&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="date_subdateintervaltype">date_sub(date,interval,type)&lt;/h2>
&lt;p>从日期减去指定的时间间隔&lt;/p>
&lt;p>type:
week
hour
day
month
quarter
year
minute&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">date_sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;2019-10-11&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">interval&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="k">day&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">city&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;20190924&amp;#39;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="n">orderId&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span>
&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">date_sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;20190924&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">interval&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">week&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="n">orderId&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="s1">&amp;#39;比例&amp;#39;&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">job_interview&lt;/span> &lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">city&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">distinct&lt;/span> &lt;span class="n">city&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;20190924&amp;#39;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="n">orderId&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">partition&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">city&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span>
&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">date_sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;20190924&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nb">interval&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">week&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="n">orderId&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">partition&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">city&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="s1">&amp;#39;比例&amp;#39;&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">job_interview&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL实战--备份,替换内容</title><link>http://localhost:1313/post/mysql%E5%AE%9E%E6%88%98-%E5%A4%87%E4%BB%BD%E6%9B%BF%E6%8D%A2%E5%86%85%E5%AE%B9/</link><pubDate>Mon, 19 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql%E5%AE%9E%E6%88%98-%E5%A4%87%E4%BB%BD%E6%9B%BF%E6%8D%A2%E5%86%85%E5%AE%B9/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>备份数据&lt;/li>
&lt;li>拆解datetime列&lt;/li>
&lt;li>replace替换列内容&lt;/li>
&lt;li>缺失值处理&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="复制表数据表结构">复制表数据表结构&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span> &lt;span class="err">复制表结构及数据到新表&lt;/span>
&lt;span class="k">create&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">table_sample&lt;/span> &lt;span class="k">select&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="k">limit&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="err">只复制表结构到新表&lt;/span>
&lt;span class="k">create&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">table_sample&lt;/span> &lt;span class="k">like&lt;/span> &lt;span class="k">table&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="err">复制旧表的数据到新表&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">假设两个表结构一样&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">insert&lt;/span> &lt;span class="k">into&lt;/span> &lt;span class="n">table_sample&lt;/span> &lt;span class="k">select&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">table&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="err">复制旧表的数据到新表&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">假设两个表结构不一样&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">INSERT&lt;/span> &lt;span class="k">INTO&lt;/span> &lt;span class="err">新表&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">字段&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">字段&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,.......)&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="err">字段&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">字段&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,......&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="err">旧表&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="列名time格式datetime-拆解成date-和time两列">列名time,格式datetime 拆解成date 和time两列&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="c1">-- 先创建列
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">add&lt;/span> &lt;span class="n">hour&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">add&lt;/span> &lt;span class="nb">date&lt;/span> &lt;span class="nb">date&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- 利用date_format
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">update&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">hour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">date_format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;%H:%i:%s&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="nb">date&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">date_format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;%y-%m-%d&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="替换列内容">替换列内容&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="c1">-- 由于 behavior_type 列的四种行为类型分别用 1，2，3，4 表示点击、收藏、加购物车、购买四种行为，为了方便查看数据，将1，2，3，4替换为 ‘pv’、’fav‘，’cart’，‘buy’ 。
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">-- behavior 之前是tinyint结构，需要更改成varchar 再进行替换文字
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">modify&lt;/span> &lt;span class="n">behavior_type&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">behavior_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">behavior_type&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;pv&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">behavior_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">behavior_type&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;fav&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">behavior_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">behavior_type&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;cart&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">behavior_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">behavior_type&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;buy&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="缺失值处理">缺失值处理：&lt;/h2>
&lt;ol>
&lt;li>建立联合主键避免缺失&lt;/li>
&lt;li>过滤缺失值&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">user&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">user_id&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="k">not&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="k">and&lt;/span> &lt;span class="k">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>数据清洗</title><link>http://localhost:1313/post/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%B5%81%E7%A8%8B/</link><pubDate>Mon, 19 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%B5%81%E7%A8%8B/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>数据清洗流程&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="数据备份">数据备份&lt;/h2>
&lt;h2 id="选择子集">选择子集&lt;/h2>
&lt;ul>
&lt;li>选择特定列数，或行数&lt;/li>
&lt;/ul>
&lt;h2 id="列名重命名">列名重命名&lt;/h2>
&lt;h2 id="删除重复值">删除重复值&lt;/h2>
&lt;ul>
&lt;li>删除重复值&lt;/li>
&lt;/ul>
&lt;h2 id="缺失值处理">缺失值处理&lt;/h2>
&lt;ul>
&lt;li>删除缺失值或补充缺失值（特定内容或统计方法）&lt;/li>
&lt;/ul>
&lt;h2 id="一致化处理">一致化处理&lt;/h2>
&lt;ul>
&lt;li>数据是否有统一的标准或命名&lt;/li>
&lt;li>数据格式，大小写等&lt;/li>
&lt;/ul>
&lt;h2 id="数据排序">数据排序&lt;/h2>
&lt;h2 id="异常值处理">异常值处理&lt;/h2>
&lt;ul>
&lt;li>数据前后的空格&lt;/li>
&lt;li>数据错误的单词&lt;/li>
&lt;li>不符合逻辑的内容&lt;/li>
&lt;/ul>
&lt;h2 id="1-完整性">1. 完整性&lt;/h2>
&lt;h5 id="问题-1缺失值">问题 1：缺失值&lt;/h5>
&lt;ul>
&lt;li>删除：删除数据缺失的记录；&lt;/li>
&lt;li>均值：使用当前列的均值；&lt;/li>
&lt;li>高频：使用当前列出现频率最高的数据。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 均值&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fillna&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mean&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 众数&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fillna&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value_counts&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span> &lt;span class="err">均值&lt;/span>
&lt;span class="k">UPDATE&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">VALUE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">ROUND&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="p">)&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="err">众数&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL--字符串函数</title><link>http://localhost:1313/post/mysql-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0/</link><pubDate>Sun, 18 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>字符串函数&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="截取字符串">截取字符串&lt;/h2>
&lt;h4 id="substring-截取字符串">substring 截取字符串&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">position&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">position&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">length&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">-- string参数是要提取子字符串的字符串
&lt;/span>&lt;span class="c1">-- position参数是一个整数，用于指定子串的起始字符，position可以是正或负整数。
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;my sql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;my sql&amp;#39;&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- -sql
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;my sql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- -my (有空格)
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">substr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;my sql&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- l
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="substring_index-按关键字截取字符串">substring_index 按关键字截取字符串&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="n">substring_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">delim&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">-- 说明：substring_index（被截取字段，关键字，关键字出现的次数）
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">substring_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;blog.jb.net&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">abstract&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">my_content_t&lt;/span>
&lt;span class="c1">-- blog.jb
&lt;/span>&lt;span class="c1">-- 如果关键字出现的次数是负数 如-2 则是从后倒数，到字符串结束
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="right-left-从两侧截取字符串">right, left 从两侧截取字符串&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="c1">-- left(str,len), right 从最左或最右截取几个字符
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="k">left&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;wbas&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- wb
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="返回字符串长度-length-char_length">返回字符串长度 length, char_length&lt;/h2>
&lt;h4 id="length-返回字符串存储长度">length 返回字符串存储长度&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;text&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="k">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;您好&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 4,6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="char_lengthstr返回字符串中的字符个数">CHAR_LENGTH(str)：返回字符串中的字符个数&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">char_length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;text&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="k">char_length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;你好&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 4,2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="instrstr-substr从源字符串str中返回子串substr第一次出现的位置">INSTR(str, substr)：从源字符串str中返回子串substr第一次出现的位置&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">instr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;foobarbar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;bar&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="更改字符串">更改字符串&lt;/h2>
&lt;h4 id="replace-替换文字大小写敏感-upperlower">replace 替换文字(大小写敏感) upper,lower&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">from_str&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">to_str&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">tb&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">f1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;abc&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;cdd&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 把tb表中的f1字段的abc替换成cdd
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">-- upper(column/str), lower 把字符串转换成大写或小写
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="k">upper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;wbs&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- WBS
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="lpadstr-len-padstr在源字符串的左边填充给定的字符padstr到指定的长度len返回填充后的字符串">LPAD(str, len, padstr)：在源字符串的左边填充给定的字符padstr到指定的长度len，返回填充后的字符串&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">lpad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hi&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;??&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- ???hi
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="rpadstr-len-padstr在源字符串的右边填充给定的字符padstr到指定的长度len返回填充后的字符串">RPAD(str, len, padstr)：在源字符串的右边填充给定的字符padstr到指定的长度len，返回填充后的字符串&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">rpad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hi&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;??&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- hi????
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="trimboth--leading--trailing-remstr-from-str-trimremstr-from-str">TRIM([{BOTH | LEADING | TRAILING} [remstr] FROM] str), TRIM([remstr FROM] str)：&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="c1">-- 从源字符串str中去掉两端、前缀或后缀字符remstr并返回；
&lt;/span>&lt;span class="c1">-- 　　如果不指定remstr，则去掉str两端的空格；
&lt;/span>&lt;span class="c1">-- 　　不指定BOTH、LEADING、TRAILING ，则默认为 BOTH。
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="k">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; bar &amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- bar
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">leading&lt;/span> &lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="s1">&amp;#39;xxxbarxxx&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- barxxx
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">both&lt;/span> &lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="s1">&amp;#39;xxxbarxxx&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- bar
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">trailing&lt;/span> &lt;span class="s1">&amp;#39;xyz&amp;#39;&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="s1">&amp;#39;barxxyz&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- barx
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ltrimstrrtrimstr去掉字符串的左边或右边的空格左对齐右对齐">LTRIM(str)，RTRIM(str)：去掉字符串的左边或右边的空格(左对齐、右对齐)&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">ltrim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; barbar &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">rs1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rtrim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; barbar &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">rs2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- barbar
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="o">#&lt;/span> &lt;span class="n">barbar&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="repeatstr-count将字符串str重复count次后返回">REPEAT(str, count)：将字符串str重复count次后返回&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">repeat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;MySQL&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- MySQLMySQLMySQL
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="reversestr将字符串str反转后返回">REVERSE(str)：将字符串str反转后返回&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;abcdef&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- fedcba
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="formatxdlocale以格式格式化数字x">FORMAT(X,D[,locale])：以格式‘#,###,###.##’格式化数字X&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="c1">-- 　　D指定小数位数
&lt;/span>&lt;span class="c1">-- 　　locale指定国家语言(默认的locale为en_US)
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">12332&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">123456&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">12332&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 12,332.1235 12,332
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="spacen返回由n个空格构成的字符串">SPACE(N)：返回由N个空格构成的字符串&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql"> &lt;span class="k">select&lt;/span> &lt;span class="k">space&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="strcmpexpr1expr2如果两个字符串是一样的则返回0如果第一个小于第二个则返回-1否则返回1">STRCMP(expr1,expr2)：如果两个字符串是一样的则返回0；如果第一个小于第二个则返回-1；否则返回1&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">strcmp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;text&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;text&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">strcmp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;text&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;text2&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 0,-1
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="合并字符串">合并字符串&lt;/h2>
&lt;h4 id="concat-concat_ws-合并字符串-管道符号">concat, concat_ws 合并字符串, 管道符号“|”&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="c1">-- concat(column/str,column/str2...) 将多个字符串首尾相连后返回
&lt;/span>&lt;span class="c1">-- 如果有任何参数为null，则函数返回null
&lt;/span>&lt;span class="c1">-- 如果参数是数字，则自动转换为字符串
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">concat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;%&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 100%
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">-- concat_ws(separator,str1,str2)
&lt;/span>&lt;span class="c1">-- 如果有任何参数为null，则函数不返回null，而是直接忽略它
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">concat_ws&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;-&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;aa&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;vv&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- aa-vv
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">s_no&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">s_name&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">s_age&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">student&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- 进行上式连接查询之后，会将查询结果集在一列中显示(字符串连接)，列名是‘列名1 || 列名2 || 列名3’
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">-- s_no || s_name || s_age
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">-- 1001张三23
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL--数据导入</title><link>http://localhost:1313/post/mysql-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5/</link><pubDate>Sun, 18 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>python实现数据导入&lt;/li>
&lt;li>sql空白列设置数字递增&lt;/li>
&lt;li>sql指定位置新增列&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="python导入数据">python导入数据&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">from&lt;/span> &lt;span class="nn">sqlalchemy&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">create_engine&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;span class="n">engine&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">create_engine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;mysql+pymysql://root:8866@localhost:3306/my_test?charset=utf8mb4&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">info&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_sql&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;bf&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">con&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">engine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">False&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">if_exists&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;append&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;span class="s1">if_exists 参数
&lt;/span>&lt;span class="s1">默认 if_exists=fail 自动创建新表，如果数据库已经有该表，会导入失败
&lt;/span>&lt;span class="s1">if_exists = append 在数据库创建表之后，追加数据
&lt;/span>&lt;span class="s1">if_exists = replace 如果数据库表有同名表，自动创建新表替换该表
&lt;/span>&lt;span class="s1">
&lt;/span>&lt;span class="s1">index 参数
&lt;/span>&lt;span class="s1">index=False 不建立索引
&lt;/span>&lt;span class="s1">index = True 自动建立索引
&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="datagrip-导入数据">datagrip 导入数据&lt;/h2>
&lt;ul>
&lt;li>需要将excel转化成csv,并且编码为utf-8&lt;/li>
&lt;/ul>
&lt;h2 id="主键设置删除">主键设置删除&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">bf&lt;/span> &lt;span class="k">add&lt;/span> &lt;span class="k">primary&lt;/span> &lt;span class="k">key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="指定位置新增列">指定位置新增列&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">bf&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">first&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">bf&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">before&lt;/span> &lt;span class="n">user_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="err">删除行&lt;/span>
&lt;span class="k">drop&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">bf&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">user_id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="err">删除列&lt;/span>
&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">bf&lt;/span> &lt;span class="k">drop&lt;/span> &lt;span class="n">clumns&lt;/span> &lt;span class="o">`&lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="自动填入空白列递增数字">自动填入空白列递增数字&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span> &lt;span class="err">设置变量&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="k">no&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">update&lt;/span> &lt;span class="n">bf&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="k">no&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=@&lt;/span>&lt;span class="k">no&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL题库(4)</title><link>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9804/</link><pubDate>Fri, 09 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9804/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>union&lt;/li>
&lt;li>最值 &amp;gt;all()&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">movie_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">title&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>movie_id 是这个表的主键。
title 是电影的名字。
表：Users&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">user_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">name&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>user_id 是表的主键。
表：Movie_Rating&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">movie_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">user_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">rating&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">created_at&lt;/td>
&lt;td style="text-align:center">date&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>(movie_id, user_id) 是这个表的主键。
这个表包含用户在其评论中对电影的评分 rating 。
created_at 是用户的点评日期。
 &lt;/p>
&lt;p>请你编写一组 SQL 查询：&lt;/p>
&lt;p>查找评论电影数量最多的用户名。&lt;br>
如果出现平局，返回字典序较小的用户名。&lt;/p>
&lt;p>查找在 2020 年 2 月 平均评分最高 的电影名称。 &lt;br>
如果出现平局，返回字典序较小的电影名称。&lt;/p>
&lt;p>查询分两行返回，查询结果格式如下例所示：&lt;/p>
&lt;p>Movies 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">movie_id&lt;/th>
&lt;th style="text-align:center">title&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Avengers&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Frozen 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">Joker&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Users 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">user_id&lt;/th>
&lt;th style="text-align:center">name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Daniel&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Monica&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">Maria&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">James&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Movie_Rating 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">movie_id&lt;/th>
&lt;th style="text-align:center">user_id&lt;/th>
&lt;th style="text-align:center">rating&lt;/th>
&lt;th style="text-align:center">created_at&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2020-01-12&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2020-02-11&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2020-02-12&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2020-01-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">2020-02-17&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2020-02-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2020-03-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2020-02-22&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2020-02-25&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Result 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">results&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Daniel&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Frozen 2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Daniel 和 Monica 都点评了 3 部电影（&amp;ldquo;Avengers&amp;rdquo;, &amp;ldquo;Frozen 2&amp;rdquo; 和 &amp;ldquo;Joker&amp;rdquo;） 但是 Daniel 字典序比较小。&lt;br>
Frozen 2 和 Joker 在 2 月的评分都是 3.5，但是 Frozen 2 的字典序比较小。&lt;/p>
&lt;ol>
&lt;li>union 两个表比较复杂的时候，作为虚拟表再连接&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="k">result&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="n">u&lt;/span>
&lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">movie_rating&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">name&lt;/span>
&lt;span class="k">having&lt;/span> &lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">distinct&lt;/span> &lt;span class="n">movie_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="k">all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">movie_rating&lt;/span> &lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">user_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">)&lt;/span>&lt;span class="n">a&lt;/span>
&lt;span class="k">union&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">title&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">title&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="k">result&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">movies&lt;/span> &lt;span class="n">m&lt;/span>
&lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">movie_rating&lt;/span> &lt;span class="n">mr&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">movie_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">movie_id&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">date_format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">created_at&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;%Y-%m&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;2020-02&amp;#39;&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">mr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">movie_id&lt;/span>
&lt;span class="k">having&lt;/span> &lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rating&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="k">all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rating&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">movie_rating&lt;/span> &lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">movie_id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">title&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">b&lt;/span>
&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL题库(5)</title><link>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9805/</link><pubDate>Fri, 09 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9805/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>左连接&lt;/li>
&lt;li>两次分组&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>编写一条 SQL 查询来找出在同一天阅读至少两篇文章的人，结果按照 id 升序排序。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">article_id&lt;/th>
&lt;th style="text-align:center">author_id&lt;/th>
&lt;th style="text-align:center">viewer_id&lt;/th>
&lt;th style="text-align:center">view_date&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">2019-08-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">2019-08-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">2019-08-02&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">7&lt;/td>
&lt;td style="text-align:center">7&lt;/td>
&lt;td style="text-align:center">2019-08-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">7&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">2019-08-02&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">7&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2019-07-22&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2019-07-21&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2019-07-21&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">distinct&lt;/span> &lt;span class="n">viewer_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">views&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">view_date&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">viewer_id&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="err">分组顺序无影响&lt;/span>
&lt;span class="k">having&lt;/span> &lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">distinct&lt;/span> &lt;span class="n">article_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL题库(6)</title><link>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9806/</link><pubDate>Fri, 09 Oct 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9806/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>多个条件并行子查询&lt;/li>
&lt;li>分组聚合+条件统计&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="1158-市场分析-i">1158. 市场分析 I&lt;/h2>
&lt;p>Table: Users&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">user_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">join_date&lt;/td>
&lt;td style="text-align:center">date&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">favorite_brand&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>此表主键是 user_id，表中描述了购物网站的用户信息，用户可以在此网站上进行商品买卖。&lt;/p>
&lt;p>Table: Orders&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">order_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">order_date&lt;/td>
&lt;td style="text-align:center">date&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">item_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">buyer_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">seller_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>此表主键是 order_id，外键是 item_id 和（buyer_id，seller_id）。&lt;/p>
&lt;p>Table: Item&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">item_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">item_brand&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>此表主键是 item_id。
 &lt;/p>
&lt;p>请写出一条SQL语句以查询每个用户的注册日期和在 2019 年作为买家的订单总数。&lt;/p>
&lt;p>查询结果格式如下：&lt;/p>
&lt;p>Users table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">user_id&lt;/th>
&lt;th style="text-align:center">join_date&lt;/th>
&lt;th style="text-align:center">favorite_brand&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2018-01-01&lt;/td>
&lt;td style="text-align:center">Lenovo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2018-02-09&lt;/td>
&lt;td style="text-align:center">Samsung&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2018-01-19&lt;/td>
&lt;td style="text-align:center">LG&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2018-05-21&lt;/td>
&lt;td style="text-align:center">HP&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Orders table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">order_id&lt;/th>
&lt;th style="text-align:center">order_date&lt;/th>
&lt;th style="text-align:center">item_id&lt;/th>
&lt;th style="text-align:center">buyer_id&lt;/th>
&lt;th style="text-align:center">seller_id&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2019-08-01&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2018-08-02&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2019-08-03&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2018-08-04&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">2018-08-04&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">2019-08-05&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Items table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">item_id&lt;/th>
&lt;th style="text-align:center">item_brand&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Samsung&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Lenovo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">LG&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">HP&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Result table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">buyer_id&lt;/th>
&lt;th style="text-align:center">join_date&lt;/th>
&lt;th style="text-align:center">orders_in_2019&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2018-01-01&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2018-02-09&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2018-01-19&lt;/td>
&lt;td style="text-align:center">0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>来源：力扣（LeetCode）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span> &lt;span class="err">统计为&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="err">的也显示出来&lt;/span> &lt;span class="err">使用左联结&lt;/span> &lt;span class="n">ifnull&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">buyer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join_date&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ifnull&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">orders_in_2019&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">orders_in_2019&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="n">users&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="k">left&lt;/span> &lt;span class="k">join&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">buyer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">orders_in_2019&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="n">u&lt;/span>
&lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">orders&lt;/span> &lt;span class="n">o&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">buyer_id&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">order_date&lt;/span> &lt;span class="k">between&lt;/span> &lt;span class="s1">&amp;#39;2019-01-01&amp;#39;&lt;/span> &lt;span class="k">and&lt;/span> &lt;span class="s1">&amp;#39;2019-12-30&amp;#39;&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">buyer_id&lt;/span> &lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">buyer_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">a&lt;/span>
&lt;span class="k">on&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">buyer_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>爬取豆瓣电影2-初步分析结论</title><link>http://localhost:1313/post/%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B12-%E5%88%9D%E6%AD%A5%E5%88%86%E6%9E%90%E7%BB%93%E8%AE%BA/</link><pubDate>Mon, 28 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B12-%E5%88%9D%E6%AD%A5%E5%88%86%E6%9E%90%E7%BB%93%E8%AE%BA/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>豆瓣数据分析&lt;/li>
&lt;li>分析结果绘图&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>&lt;strong>数据说明：&lt;/strong>&lt;br>
爬取了豆瓣电影2万部，在导入数据库时设置了字段不为空，所以过滤了大量字段缺失电影。&lt;br>
并且字段缺失越多，说明电影无人问津，过滤了一大批低质量电影。所以总体评分会高于实际情况。&lt;/p>
&lt;h2 id="分析总体概况">分析总体概况&lt;/h2>
&lt;h3 id="电影产量的国家分布">电影产量的国家分布&lt;/h3>
&lt;p>以美国为首电影数量最多的前10个国家&lt;br>
-美国产量遥遥领先，其次是产量大国是中国及日本欧美&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/28/8Ka3.png" alt="">&lt;/p>
&lt;h3 id="电影产量的年代分布">电影产量的年代分布&lt;/h3>
&lt;p>-除开今年外最近的十年，电影产量的分布基本与时间吻合，目前收录最多的是2016年，最少的为1911年&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/29/8Kym.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/28/8Kan.png" alt="">&lt;/p>
&lt;h3 id="电影类型的分布">电影类型的分布&lt;/h3>
&lt;p>-其中剧情电影占主导，其次是喜剧，爱情，动作。&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/28/8KaB.png" alt="">&lt;/p>
&lt;h3 id="电影评分分布">电影评分分布&lt;/h3>
&lt;ul>
&lt;li>电影平均分 6.91,其中高分电影（8分以上）占比 17.6%, 低分电影 （6分以下）占比 19.2%.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/29/8Kyi.png" alt="">&lt;/p>
&lt;p>-分数分布最多在7.5，最低分数电影和最高分数电影由于观看人数少评分有一定的偏差&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/28/8Ka8.png" alt="">&lt;/p>
&lt;h3 id="电影评价人数的分布">电影评价人数的分布&lt;/h3>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/28/8Kaa.png" alt="">&lt;br>
-评价人数的分布非常的不均衡，方差巨大，其中最大值有两百万，而最小值是26&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/29/8Kz0.png" alt="">&lt;/p>
&lt;p>评分人数超过100万的电影目前只有31部,其中超过150万的电影只有下图的十部。&lt;/p>
&lt;p>其中，近十年只有三部电影评价人数超过了150万，中国有两部。&lt;/p>
&lt;p>根据电影的年份，对比90年代，中国优质电影的占比从1/5上升到了现在的2/3。国内电影的制作水平在上升，大家观影趋势从国外向国内转移。 另一个侧面也反映了经典电影的影响久远，并未随着时间而被人遗忘
&lt;img src="https://i.niupic.com/images/2020/09/29/8KyE.png" alt="">&lt;/p>
&lt;h2 id="分析大众电影的特点">分析大众电影的特点&lt;/h2>
&lt;blockquote>
&lt;p>电影国家，类型对大众电影的热门程度影响不明显&lt;/p>
&lt;/blockquote>
&lt;p>-以评分人数为指标，将电影人数分层，统计了每个层次电影数量前5个国家的电影数量。&lt;/p>
&lt;blockquote>
&lt;p>可以观察到由于美国和国内的电影基数较大，在每个层次占比均在前位。同样，对于类型而言，剧情，喜剧，动作基数大，在每个分层都占据主导地位&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/29/8Kzn.png" alt="">&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/29/8Kzo.png" alt="">&lt;/p>
&lt;h3 id="电影的热门程度和国家的关系">电影的热门程度和国家的关系&lt;/h3>
&lt;p>-所有国家平均电影数量为525部，评价均分较高的国家的电影数量均较低。
(已经剔除了电影数量小于30,且评论人数小于500的电影)&lt;/p>
&lt;blockquote>
&lt;p>日本，法国，英国的电影质量比较有代表性，同时也是电影产量前十国家。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/28/8KaS.png" alt="">&lt;/p>
&lt;h3 id="电影的热门程度和类型的关系">电影的热门程度和类型的关系&lt;/h3>
&lt;p>评价人数最多五种的电影类型
&lt;img src="https://i.niupic.com/images/2020/09/29/8Kb8.png" alt="">&lt;/p>
&lt;p>评分最高的五种电影类型&lt;br>
-明显可以看出高分电影评价人数较少，有递减的趋势，可以理解为小众电影的质量高
&lt;img src="https://i.niupic.com/images/2020/09/29/8Kb9.png" alt="">&lt;/p>
&lt;h2 id="分析国内电影发展趋势">分析国内电影发展趋势&lt;/h2>
&lt;h3 id="数量上是增长的趋势吗">数量上是增长的趋势吗&lt;/h3>
&lt;p>中国电影数量基本在连年递增，自2016年后的电影数量有所下降，推测原因有两点，一是爬取时数据的过滤，缺失字段的电影信息不在本次数据中，也就是说后几年有大量的低质量电影。二是豆瓣维护的时效性。&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/29/8KbD.png" alt="">&lt;/p>
&lt;h3 id="质量上是向优质发展吗">质量上是向优质发展吗&lt;/h3>
&lt;p>总体不是一个好的发展态势&lt;br>
可以看出无论是世界电影的评分趋势还是国内评分都呈现递减。90年代都是评分的高峰值时期。结合之前的评分超过150万人次的top10电影，有一半分布在90年代，且分数很高。诞生了大批优质电影。一是分母小，电影总体产量不高，但质量不低，二是分子高，同步论证该年代质量有保证。&lt;/p>
&lt;p>21世纪，电影总体质量下滑，中国电影质量下滑明显。商业片的逐年增多，越发浮躁的社会背景。不论是从电影还是影视我们都能感受到质量的下滑。&lt;/p>
&lt;p>&lt;img src="https://i.niupic.com/images/2020/09/29/8Kzi.png" alt="">&lt;/p>
&lt;p>&lt;strong>总结&lt;/strong>&lt;/p>
&lt;p>从电影总体概况来看，美国是产量最多的国家，电影的产量总体趋势是逐年增加，大家最爱看的是喜剧，爱情动作类电影。&lt;/p>
&lt;p>从电影质量来看，6-8分电影占据了大部分，评分人数超过了150万的电影只有10部，其中90年代占比5部。经典电影的影响力经久不衰。&lt;/p>
&lt;p>评价人数并没有和电影类型的吻合，大家最想评价的电影并不一定是商业片最多的类型。但是从评分可以明显看出小众电影的优质性。&lt;/p>
&lt;p>最后从中国电影的发展趋势可以看出，电影行业产量在增加，也就是民众的娱乐需求在增加。但质量确没有跟上发展趋势。&lt;/p></description></item><item><title>MySQL题库(2)</title><link>http://localhost:1313/post/mysql_%E8%AF%95%E9%A2%9802/</link><pubDate>Sun, 27 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql_%E8%AF%95%E9%A2%9802/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>左连接&lt;/li>
&lt;li>自连接&lt;/li>
&lt;li>COUNT() null合计为0&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>&lt;strong>leetcode 1364. 顾客的可信联系人数量&lt;/strong>&lt;/p>
&lt;p>SQL架构&lt;br>
顾客表：Customers&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">customer_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">customer_name&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">email&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>customer_id 是这张表的主键。&lt;br>
此表的每一行包含了某在线商店顾客的姓名和电子邮件。&lt;/p>
&lt;p>联系方式表：Contacts&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">user_id&lt;/td>
&lt;td style="text-align:center">id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">contact_name&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">contact_email&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>(user_id, contact_email) 是这张表的主键。&lt;br>
此表的每一行表示编号为 user_id 的顾客的某位联系人的姓名和电子邮件。&lt;br>
此表包含每位顾客的联系人信息，但顾客的联系人不一定存在于顾客表中。&lt;/p>
&lt;p>发票表：Invoices&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">invoice_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">price&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">user_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>invoice_id 是这张表的主键。&lt;br>
此表的每一行分别表示编号为 user_id 的顾客拥有有一张编号为 invoice_id、价格为 price 的发票。&lt;/p>
&lt;p>&lt;strong>为每张发票 invoice_id 编写一个SQL查询以查找以下内容：&lt;/strong>&lt;/p>
&lt;p>customer_name：与发票相关的顾客名称。&lt;br>
price：发票的价格。&lt;br>
contacts_cnt：该顾客的联系人数量。&lt;br>
trusted_contacts_cnt：可信联系人的数量：既是该顾客的联系人又是商店顾客的联系人数量（即：可信联系人的电子邮件存在于客户表中）。&lt;br>
将查询的结果按照 invoice_id 排序。&lt;/p>
&lt;p>&lt;strong>查询结果的格式如下例所示：&lt;/strong>&lt;/p>
&lt;p>Customers table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">customer_id&lt;/th>
&lt;th style="text-align:center">customer_name&lt;/th>
&lt;th style="text-align:center">email&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:alice@leetcode.com">alice@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:bob@leetcode.com">bob@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">13&lt;/td>
&lt;td style="text-align:center">John&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:john@leetcode.com">john@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">Alex&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:alex@leetcode.com">alex@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Contacts table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">user_id&lt;/th>
&lt;th style="text-align:center">contact_name&lt;/th>
&lt;th style="text-align:center">contact_email&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:bob@leetcode.com">bob@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">John&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:john@leetcode.com">john@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Jal&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:jal@leetcode.com">jal@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Omar&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:omar@leetcode.com">omar@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Meir&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:meir@leetcode.com">meir@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:alice@leetcode.com">alice@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Invoices table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">invoice_id&lt;/th>
&lt;th style="text-align:center">price&lt;/th>
&lt;th style="text-align:center">user_id&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">99&lt;/td>
&lt;td style="text-align:center">300&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">66&lt;/td>
&lt;td style="text-align:center">400&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">55&lt;/td>
&lt;td style="text-align:center">500&lt;/td>
&lt;td style="text-align:center">13&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">44&lt;/td>
&lt;td style="text-align:center">60&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Result table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">invoice_id&lt;/th>
&lt;th style="text-align:center">customer_name&lt;/th>
&lt;th style="text-align:center">price&lt;/th>
&lt;th style="text-align:center">contacts_cnt&lt;/th>
&lt;th style="text-align:center">trusted_contacts_cnt&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">44&lt;/td>
&lt;td style="text-align:center">Alex&lt;/td>
&lt;td style="text-align:center">60&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">55&lt;/td>
&lt;td style="text-align:center">John&lt;/td>
&lt;td style="text-align:center">500&lt;/td>
&lt;td style="text-align:center">0&lt;/td>
&lt;td style="text-align:center">0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">66&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">400&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">99&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">300&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Alice 有三位联系人，其中两位(Bob 和 John)是可信联系人。&lt;br>
Bob 有两位联系人, 他们中的任何一位都不是可信联系人。&lt;br>
Alex 只有一位联系人(Alice)，并是一位可信联系人。&lt;br>
John 没有任何联系人。&lt;/p>
&lt;p>&lt;strong>解题：左连接，链接数量依次递减&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">invoices&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">invoice_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">invoices&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">price&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">contacts_cnt&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">trusted_contacts_cnt&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">Invoices&lt;/span> &lt;span class="n">invoices&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Customers&lt;/span> &lt;span class="n">customers&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">invoices&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Contacts&lt;/span> &lt;span class="n">contacts&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Customers&lt;/span> &lt;span class="n">c2&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">contact_email&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">email&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">invoices&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">invoice_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>步骤一：&lt;br>
发 票 - 顾客 : inner join 寻找发 票对应的顾客信息
顾客 - 联系人 : left join 寻找顾客对应的联系人总数，因为需要统计 0 的情况，所以使用 left&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">invoice_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">price&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">Invoices&lt;/span> &lt;span class="n">invoices&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Customers&lt;/span> &lt;span class="n">customers&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">invoices&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Contacts&lt;/span> &lt;span class="n">contacts&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>
&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">invoice_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">invoice_id&lt;/th>
&lt;th style="text-align:center">customer_name&lt;/th>
&lt;th style="text-align:center">price&lt;/th>
&lt;th style="text-align:center">customer_id&lt;/th>
&lt;th style="text-align:center">user_id&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">44&lt;/td>
&lt;td style="text-align:center">Alex&lt;/td>
&lt;td style="text-align:center">60&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">55&lt;/td>
&lt;td style="text-align:center">John&lt;/td>
&lt;td style="text-align:center">500&lt;/td>
&lt;td style="text-align:center">13&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">66&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">400&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">66&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">400&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">99&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">300&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">99&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">300&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>步骤二：
左连接 联系人 - 顾客 : left join 寻找联系人是否在顾客表中以及总数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">invoice_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">price&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">email&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">Invoices&lt;/span> &lt;span class="n">invoices&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Customers&lt;/span> &lt;span class="n">customers&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">invoices&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Contacts&lt;/span> &lt;span class="n">contacts&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">user_id&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">Customers&lt;/span> &lt;span class="n">c2&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">contacts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">contact_email&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">email&lt;/span>
&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">invoice_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">invoice_id&lt;/th>
&lt;th style="text-align:center">customer_name&lt;/th>
&lt;th style="text-align:center">price&lt;/th>
&lt;th style="text-align:center">customer_id&lt;/th>
&lt;th style="text-align:center">user_id&lt;/th>
&lt;th style="text-align:center">email&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">44&lt;/td>
&lt;td style="text-align:center">Alex&lt;/td>
&lt;td style="text-align:center">60&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:alice@leetcode.com">alice@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">55&lt;/td>
&lt;td style="text-align:center">John&lt;/td>
&lt;td style="text-align:center">500&lt;/td>
&lt;td style="text-align:center">13&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">66&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">400&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">66&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">400&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:bob@leetcode.com">bob@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:john@leetcode.com">john@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">77&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:john@leetcode.com">john@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">88&lt;/td>
&lt;td style="text-align:center">Alice&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">&lt;a href="mailto:bob@leetcode.com">bob@leetcode.com&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">99&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">300&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">99&lt;/td>
&lt;td style="text-align:center">Bob&lt;/td>
&lt;td style="text-align:center">300&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">NULL&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>MySQL题库(3)</title><link>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9803/</link><pubDate>Sun, 27 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-%E8%AF%95%E9%A2%9803/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>多个条件并行子查询&lt;/li>
&lt;li>分组聚合+条件统计&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>&lt;strong>1398. 购买了产品A和产品B却没有购买产品C的顾客&lt;/strong>&lt;br>
SQL架构&lt;/p>
&lt;p>Customers 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">customer_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">customer_name&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>customer_id 是这张表的主键。&lt;br>
customer_name 是顾客的名称。&lt;/p>
&lt;p>Orders 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">order_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">customer_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">product_name&lt;/td>
&lt;td style="text-align:center">varchar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>order_id 是这张表的主键。&lt;br>
customer_id 是购买了名为 &amp;ldquo;product_name&amp;rdquo; 产品顾客的id。&lt;/p>
&lt;p>&lt;strong>请你设计 SQL 查询来报告购买了产品 A 和产品 B 却没有购买产品 C 的顾客的 ID 和姓名（ customer_id 和 customer_name ），我们将基于此结果为他们推荐产品 C 。&lt;br>
您返回的查询结果需要按照 customer_id 排序。&lt;/strong>&lt;/p>
&lt;p>查询结果如下例所示。&lt;/p>
&lt;p>Customers table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">customer_id&lt;/th>
&lt;th style="text-align:center">customer_name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Daniel&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Diana&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">Elizabeth&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">Jhon&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Orders table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">order_id&lt;/th>
&lt;th style="text-align:center">customer_id&lt;/th>
&lt;th style="text-align:center">product_name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">10&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">A&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">20&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">30&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">D&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">40&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">C&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">50&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">A&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">60&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">A&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">70&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">80&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">D&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">90&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">C&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Result table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">customer_id&lt;/th>
&lt;th style="text-align:center">customer_name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">Elizabeth&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>只有 customer_id 为 3 的顾客购买了产品 A 和产品 B ，却没有购买产品 C 。&lt;/p>
&lt;p>思路一：&lt;br>
分组 having sum 正负性判断&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">customer_name&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">orders&lt;/span> &lt;span class="n">o&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">customers&lt;/span> &lt;span class="k">c&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">customer_id&lt;/span>
&lt;span class="k">HAVING&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;span class="k">AND&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>思路二：&lt;br>
三次子查询&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">customer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">customer_name&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">customers&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">customer_id&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">customer_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">orders&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">product_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="k">AND&lt;/span> &lt;span class="n">customer_id&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">customer_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">orders&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">product_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="k">AND&lt;/span> &lt;span class="n">customer_id&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">customer_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">orders&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">product_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Matplotlib-图像的基础设置</title><link>http://localhost:1313/post/python%E5%8F%AF%E8%A7%86%E5%8C%96-matplotlib/</link><pubDate>Tue, 22 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/python%E5%8F%AF%E8%A7%86%E5%8C%96-matplotlib/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>基础绘图&lt;/li>
&lt;li>图像设置&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="1-基础绘图">1. 基础绘图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 1. 导入模块,包（模块集合）&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">matplotlib.pyplot&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">plt&lt;/span>
&lt;span class="c1"># 在jupyter中执行的时候显示图片&lt;/span>
&lt;span class="c1"># %matplotlib inline (jupter 提供)&lt;/span>
&lt;span class="c1"># 传入x,y 通过plot画图&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 在执行程序的时候展示图形&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/0l84th.png" alt="">&lt;/p>
&lt;h2 id="2-颜色和形状设置">2. 颜色和形状设置&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">23&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">linestyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;--&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">linewidth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#(颜色)&lt;/span>
&lt;span class="c1"># alpha 毛玻璃效果(0-1) 折线透明度&lt;/span>
&lt;span class="c1"># linestyle 折线的样式 ： solid实线,dashed短线, dashdot端点相间线, dotted 虚点线&lt;/span>
&lt;span class="c1"># linewidth 折线的宽度&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/fhqcw5.png" alt="">&lt;/p>
&lt;h2 id="3-折点样式">3. 折点样式&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">marker&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;o&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;g&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">markeredgecolor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;g&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">markeredgewidth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># marker 实点&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/b61i9h.png" alt="">&lt;/p>
&lt;h2 id="4-图片的大小和保存">4. 图片的大小和保存&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">random&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">26&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># figsize：指定figure的宽和高，单位为英寸&lt;/span>
&lt;span class="c1"># dpi参数指定绘图对象的分辨率，即每英寸多少个像素，缺省值为80,&lt;/span>
&lt;span class="c1"># 1英寸等于2.5cm&lt;/span>
&lt;span class="c1"># plt.show() #相当于close,内容释放&lt;/span>
&lt;span class="c1"># 保存（注意：要放在绘制的下面，并且plt.show()会释放figure资源，如果现实图像之前释放则保存图像为空&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;./t1.png&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 图片的格式也可以保存为svg矢量图格式，放大不会有锯齿&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;./t1.svg&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/6nx31c.png" alt="">&lt;/p>
&lt;h2 id="5-绘制x轴和y轴的刻度">5. 绘制x轴和y轴的刻度&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">26&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 构造x轴刻度标签&lt;/span>
&lt;span class="c1"># 2:00 x_ticks_label 显示标签，X确定个数和疏密程度&lt;/span>
&lt;span class="n">x_ticks_label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;{}:00&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># rotation = 45 让字旋转45度&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xticks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x_ticks_label&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rotation&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">45&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 设置y轴的刻度标签&lt;/span>
&lt;span class="c1"># 构造显示的标签&lt;/span>
&lt;span class="n">y_ticks_label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;{}℃&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;span class="c1"># 绘图&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/frr9sb.png" alt="">&lt;/p>
&lt;h2 id="6-设置显示中文">6. 设置显示中文&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># matplotlib只显示英文，无法显示中文，需要修改 matplotlib 的默认字体&lt;/span>
&lt;span class="c1"># 通过 matplotlib下的font_manager 可以解决&lt;/span>
&lt;span class="c1"># 两个小时的每分钟跳动变化&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">matplotlib&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">font_manager&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">120&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">120&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#设置画布的大小和分辨率&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 加坐标轴信息&lt;/span>
&lt;span class="c1"># 查看Linux,Mac下支持的字体&lt;/span>
&lt;span class="c1"># 终端执行：fc-list&lt;/span>
&lt;span class="c1"># 查看支持的中文： fc-list :lang=zh&lt;/span>
&lt;span class="c1"># 查看windows下的字体：&amp;#34;C:\Windows\Fonts\&amp;#34;&lt;/span>
&lt;span class="c1"># 可以自己下载字体文件 (xxx.ttf),然后双击安装即可&lt;/span>
&lt;span class="c1"># my_font = font_manager.FontProperties(fname=&amp;#39;/System/Library/Fonts/PingFang.ttc&amp;#39;,s)&lt;/span>
&lt;span class="c1"># plt.ylabel(&amp;#39;天气&amp;#39;,fontproperties=my_font)&lt;/span>
&lt;span class="c1"># 构造字体&lt;/span>
&lt;span class="n">my_font&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">font_manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FontProperties&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;\Windows\Fonts\simfang.ttf&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">weight&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 设置X轴标题&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xlabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;时间&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rotation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fontproperties&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">my_font&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># rotation 将字体旋转45度&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;次数&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">fontproperties&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">my_font&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;每分钟跳动次数&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">fontproperties&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">my_font&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/nwxlzz.png" alt="">&lt;/p>
&lt;h2 id="7-一图多线">7. 一图多线&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">y1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">y2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 设置图形&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 图例显示的文字&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;自己&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;同事&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 设置x轴刻度&lt;/span>
&lt;span class="n">x_ticks_label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;{}岁&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">my_font&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">font_manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FontProperties&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;\Windows\Fonts\simfang.ttf&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xticks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x_ticks_label&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">fontproperties&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">my_font&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rotation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 绘制网格（网格也可以是设置线的样式）&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 添加图例（注意：只有在这里需要添加prop参数是显示中文，其他的都用fontproperties&lt;/span>
&lt;span class="c1"># 设置位置loc:upper left, lower left, center left, upper center&lt;/span>
&lt;span class="c1"># 设置中文显示字体prop&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">prop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">my_font&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;upper right&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/tg2ac9.png" alt="">&lt;/p>
&lt;h2 id="8-一图多个坐标系子图">8. 一图多个坐标系子图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># add_subplot 方法----给figure新增子图&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 新建figure对象&lt;/span>
&lt;span class="n">fig&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 新建子图1&lt;/span>
&lt;span class="c1"># (2,2,1)两行两列 画布上布局&lt;/span>
&lt;span class="n">ax1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add_subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ax1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 新建子图2&lt;/span>
&lt;span class="n">ax2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add_subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># grid网格&lt;/span>
&lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">linestyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;--&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">linewidth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 新建子图3&lt;/span>
&lt;span class="n">ax3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add_subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ax3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/e79y14.png" alt="">&lt;/p>
&lt;h2 id="9--设置坐标轴范围">9. 设置坐标轴范围&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 可以调x轴的左右两边&lt;/span>
&lt;span class="c1"># plt.xlim([-5,5])&lt;/span>
&lt;span class="c1"># 只调一边&lt;/span>
&lt;span class="c1"># plt.xlim(xmin=-4)&lt;/span>
&lt;span class="c1"># plt.xlim(xmax=4)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ymin&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xlim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">xmin&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/e2d6a8.png" alt="">&lt;/p>
&lt;h2 id="10-改变坐标轴的默认显示方式">10. 改变坐标轴的默认显示方式&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">matplotlib.pyplot&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">plt&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 获得当前图表的图像&lt;/span>
&lt;span class="n">ax&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gca&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 设置图型的包围线&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">spines&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_color&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;none&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#不显示&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">spines&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;top&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_color&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;none&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#不显示&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">spines&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;bottom&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_color&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">spines&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_color&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 设置底边的移动范围，移动到y轴的0位置，&lt;/span>
&lt;span class="c1"># ‘data’：移动轴的位置到交叉的指定坐标&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">spines&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;bottom&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_position&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="s1">&amp;#39;data&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">spines&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_position&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="s1">&amp;#39;data&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/ckou6j.png" alt="">&lt;/p></description></item><item><title>Matplotlib-绘制不同类型的图像</title><link>http://localhost:1313/post/python%E5%8F%AF%E8%A7%86%E5%8C%96-matplotlib2/</link><pubDate>Tue, 22 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/python%E5%8F%AF%E8%A7%86%E5%8C%96-matplotlib2/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>散点图&lt;/li>
&lt;li>图像设置&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="散点图">散点图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># plt.scatter(x, y, marker=None) 函数。&lt;/span>
&lt;span class="c1"># x、y 是坐标，marker 代表了标记的符号。比如“x”、“&amp;gt;”或者“o”&lt;/span>
&lt;span class="n">N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1000&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">marker&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># sns.jointplot(x, y, data=None, kind=‘scatter’) 函数。&lt;/span>
&lt;span class="c1"># 其中 x、y 是 data 中的下标。&lt;/span>
&lt;span class="c1"># data 就是我们要传入的数据，一般是 DataFrame 类型。&lt;/span>
&lt;span class="c1"># kind 这类我们取 scatter，代表散点的意思&lt;/span>
&lt;span class="c1"># 绘制散点图及变量分布情况&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">})&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jointplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">kind&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;scatter&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/erk29p.png" alt="">&lt;/p>
&lt;h2 id="折线图">折线图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 折线图&lt;/span>
&lt;span class="c1"># plt.plot() 函数，需要把数据按照 x 轴的大小进行排序，要不画出来的折线图就无法按照 x 轴递增的顺序展示。&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">2010&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2011&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2012&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2013&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2014&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2015&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2016&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2017&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2018&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2019&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">19&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">32&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">35&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">linestyle&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;--&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">linewidth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#alpha 毛玻璃效果&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">marker&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;o&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;g&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">markeredgecolor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;g&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">markeredgewidth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#marker实点&lt;/span>
&lt;span class="c1"># Seaborn 中，使用 sns.lineplot (x, y, data=None) 函数。&lt;/span>
&lt;span class="c1"># 其中 x、y 是 data 中的下标。data 是要传入的数据，一般是 DataFrame 类型。&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">})&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lineplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="直方图">直方图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># plt.hist(x, bins=10) 函数&lt;/span>
&lt;span class="c1"># 其中参数 x 是一维数组&lt;/span>
&lt;span class="c1"># bins 代表直方图中的箱子数量，默认是 10。&lt;/span>
&lt;span class="n">a&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hist&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># sns.distplot(x, bins=10, kde=True) 函数。&lt;/span>
&lt;span class="c1"># 其中参数 x 是一维数组，&lt;/span>
&lt;span class="c1"># bins 代表直方图中的箱子数量，&lt;/span>
&lt;span class="c1"># kde 代表显示核密度估计，默认是 True，&lt;/span>
&lt;span class="c1"># 可以把 kde 设置为 False，不进行显示。&lt;/span>
&lt;span class="c1"># 核密度估计是通过核函数帮我们来估计概率密度的方法。&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">distplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">kde&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">distplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">kde&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="条形图">条形图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">height&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">函数，&lt;/span>
&lt;span class="c1"># 其中参数 x 代表 x 轴的位置序列，&lt;/span>
&lt;span class="c1"># height 是 y 轴的数值序列，也就是柱子的高度。&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Cat1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Cat2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Cat3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Cat4&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Cat5&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 使用 sns.barplot(x=None, y=None, data=None) 函数。&lt;/span>
&lt;span class="c1"># 其中参数 data 为 DataFrame 类型，x、y 是 data 中的变量。&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">barplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="箱型图">箱型图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="c1"># 箱型图 盒式图 最大值 (max)、最小值 (min)、中位数 (median) 和上下四分位数 (Q3, Q1)&lt;/span>
&lt;span class="c1"># plt.boxplot(x, labels=None) 函数，&lt;/span>
&lt;span class="c1"># 其中参数 x 代表要绘制箱线图的数据，&lt;/span>
&lt;span class="c1"># labels 是缺省值，可以为箱线图添加标签&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;D&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">boxplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># sns.boxplot(x=None, y=None, data=None) 函数。&lt;/span>
&lt;span class="c1"># 其中参数 data 为 DataFrame 类型，x、y 是 data 中的变量。&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">boxplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="饼图">饼图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># plt.pie(x, labels=None) 函数，&lt;/span>
&lt;span class="c1"># 其中参数 x 代表要绘制饼图的数据，&lt;/span>
&lt;span class="c1"># labels 是缺省值，可以为饼图添加标签。&lt;/span>
&lt;span class="n">nums&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">37&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">37&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;High-school&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Bachelor&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Master&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;Ph.d&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Others&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/f7fsyt.png" alt="">&lt;/p>
&lt;h2 id="热力图">热力图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># Seaborn 中的 sns.heatmap(data) 函数，&lt;/span>
&lt;span class="c1"># 其中 data 代表需要绘制的热力图数据。&lt;/span>
&lt;span class="n">flights&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;flights&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">flights&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pivot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;year&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;month&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;passengers&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">heatmap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/f13wux.png" alt="">&lt;/p>
&lt;h2 id="蜘蛛图">蜘蛛图&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">matplotlib.pyplot&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">plt&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">seaborn&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">sns&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">matplotlib.font_manager&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">FontProperties&lt;/span>
&lt;span class="c1"># 数据准备&lt;/span>
&lt;span class="n">labels&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="sa">u&lt;/span>&lt;span class="s2">&amp;#34;推进&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;KDA&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="sa">u&lt;/span>&lt;span class="s2">&amp;#34;生存&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="sa">u&lt;/span>&lt;span class="s2">&amp;#34;团战&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="sa">u&lt;/span>&lt;span class="s2">&amp;#34;发育&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="sa">u&lt;/span>&lt;span class="s2">&amp;#34;输出&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="n">stats&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">83&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">61&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">95&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">67&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">88&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># 画图数据准备，角度、状态值&lt;/span>
&lt;span class="n">angles&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linspace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pi&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">endpoint&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">stats&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concatenate&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">stats&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="n">stats&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]]))&lt;/span>
&lt;span class="n">angles&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concatenate&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">angles&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="n">angles&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]]))&lt;/span>
&lt;span class="c1"># 用Matplotlib画蜘蛛图&lt;/span>
&lt;span class="n">fig&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">ax&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add_subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">111&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">polar&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">angles&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stats&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;o-&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">linewidth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">angles&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stats&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.25&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 设置中文字体&lt;/span>
&lt;span class="n">font&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">FontProperties&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s2">&amp;#34;C:\Windows\Fonts\simhei.ttf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_thetagrids&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">angles&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">180&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pi&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">labels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FontProperties&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">font&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/hp4n9q.png" alt="">&lt;/p>
&lt;h2 id="二元变量分布">二元变量分布&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 两个变量之间的关系&lt;/span>
&lt;span class="c1"># sns.jointplot(x, y, data=None, kind) 函数。&lt;/span>
&lt;span class="c1"># 其中用 kind 表示不同的视图类型：“kind=‘scatter’”代表散点图，&lt;/span>
&lt;span class="c1"># “kind=‘kde’”代表核密度图，&lt;/span>
&lt;span class="c1"># “kind=‘hex’ ”代表 Hexbin 图，它代表的是直方图的二维模拟。&lt;/span>
&lt;span class="n">tips&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tips&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jointplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;total_bill&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;tip&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">tips&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">kind&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;scatter&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jointplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;total_bill&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;tip&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">tips&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">kind&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;kde&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jointplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;total_bill&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;tip&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">tips&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">kind&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;hex&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/dddciw.png" alt="">
&lt;img src="https://files.catbox.moe/f7bhrw.png" alt="">
&lt;img src="https://files.catbox.moe/s4mf3n.png" alt="">&lt;/p>
&lt;h2 id="成对关系">成对关系&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># sns.pairplot() 函数&lt;/span>
&lt;span class="c1"># 同时展示出 DataFrame 中每对变量的关系，&lt;/span>
&lt;span class="c1"># 另外在对角线上，你能看到每个变量自身作为单变量的分布情况&lt;/span>
&lt;span class="n">iris&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;iris&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pairplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/tznll9.png" alt="">&lt;/p></description></item><item><title>Numpy</title><link>http://localhost:1313/post/python-numpy/</link><pubDate>Tue, 22 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/python-numpy/</guid><description>&lt;h2 id="创建数组">创建数组&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 创建一维数组&lt;/span>
&lt;span class="c1"># 1. 直接传入列表&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;span class="n">list1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">oneArray&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">oneArray&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">oneArray&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># &amp;lt;class &amp;#39;numpy.ndarray&amp;#39;&amp;gt;&lt;/span>
&lt;span class="c1"># [1 2 3 4]&lt;/span>
&lt;span class="c1"># 2. 传入range生成序列&lt;/span>
&lt;span class="n">t2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># [0 1 2 3 4 5 6 7 8 9]&lt;/span>
&lt;span class="c1"># 3. 使用numpy的np.arange()生成数组&lt;/span>
&lt;span class="n">t3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># [0 2 4 6 8]&lt;/span>
&lt;span class="n">t4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ones&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">t5&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">t6&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ones&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">t7&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 创建二维数组&lt;/span>
&lt;span class="n">list2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;span class="n">twoArray&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">twoArray&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="常用属性">常用属性&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">list2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;span class="n">twoArray&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 获取数组维度&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">twoArray&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ndim&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 形状&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">twoArray&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#(3,2)行列&lt;/span>
&lt;span class="c1"># 确定数组个数&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">twoArray&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 6 &lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="调整形状">调整形状&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 1 在原有数据上改变&lt;/span>
&lt;span class="n">four&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">four&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 3行2列 shape &lt;/span>
&lt;span class="n">four&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># [[1 2]&lt;/span>
&lt;span class="c1"># [3 4]&lt;/span>
&lt;span class="c1"># [5 6]]&lt;/span>
&lt;span class="c1"># 2 改变形状返回一个新的数据&lt;/span>
&lt;span class="n">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">four&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 3 二维数组改为一维数组&lt;/span>
&lt;span class="n">four&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="n">four&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">four&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,)&lt;/span> &lt;span class="c1">#6个数据&lt;/span>
&lt;span class="c1"># F按照列顺序，默认按照C 按照行&lt;/span>
&lt;span class="n">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,),&lt;/span>&lt;span class="n">order&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;F&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 4 数组的形状&lt;/span>
&lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 转换为二维&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 转换成三维&lt;/span>
&lt;span class="n">t2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组转为list">数组转为list&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">88&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="n">list_a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tolist&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="numpy的数据类型">numpy的数据类型&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1">#默认是int64&lt;/span>
&lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">dtype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">int16&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 返回数组中每个元素的字节单位长度&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">itemsize&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 获取数据类型&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dtype&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 调整数据类型&lt;/span>
&lt;span class="n">f1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">int64&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dtype&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 随机生成小数&lt;/span>
&lt;span class="n">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)])&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组的计算">数组的计算&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 1. 数组和数的计算&lt;/span>
&lt;span class="c1"># 由于numpy的广播机制在运算过程中，&lt;/span>
&lt;span class="c1"># 加减乘除的值被广播到所有的元素上面&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 同种形状的数组（对应位置进行计算操作）&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">t2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">124&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">t2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">t2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 不同形状的多维数组不能计算 行列分布不同&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 行数或者列数相同的一维数组和多维数组可以进行计算：&lt;/span>
&lt;span class="c1"># 行形状相同（会与每一行数组的对应位相操作）&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">t2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 列形状相同（会与每一个相同维度的数组的对应位操作）&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">t2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组的轴">数组的轴&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 二维的轴&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 根据0轴进行计算 列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">#[5,7,9]&lt;/span>
&lt;span class="c1"># 根据1轴进行计算 行&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">#[6,15]&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">#计算所有和的值&lt;/span>
&lt;span class="c1"># 三维的轴&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">27&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组的索引和切片">数组的索引和切片&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 一维数组的操作方法&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 冒号分隔切片参数 start:stop:step 来进行切片操作&lt;/span>
&lt;span class="c1"># 从索引2开始到索引7停止 (7不取)，间隔为2&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 如果只放置一个参数，如[2]，将返回与该索引相对应的单个元素&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 如果为[2:],表示从该索引开始以后的所有项都被提取&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;span class="c1"># 多维数组的操作方法&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 取一行，根据下标，第一行为0&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,:])&lt;/span>
&lt;span class="c1"># 取连续多行&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],:)&lt;/span>
&lt;span class="c1"># 不连续取多行:两个中括号&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],:])&lt;/span> &lt;span class="c1"># 切片[行，列[切片]] [[行行行],[列列列]]&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="c1"># 0行0列，1行1列，1行3列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># 取第二列所有值&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span> &lt;span class="c1"># 第二列到所有列的值&lt;/span>
&lt;span class="c1"># 取一列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 取连续多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;span class="c1"># 取不连续多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[:,[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="c1"># 取一个值 三行四列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组中的数值修改">数组中的数值修改&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 1. 重新赋值&lt;/span>
&lt;span class="c1"># 修改某一行的值&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,:]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="c1"># 修改某一列的值&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="c1"># 连续修改多行&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,:]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="c1"># 连续修改多列&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="c1"># 修改多行多列 第二行到第四行,第三列到第五列&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="c1"># 修改多个位置&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="c1"># 根据条件修改&lt;/span>
&lt;span class="c1"># 需求如果大于10，全部变0&lt;/span>
&lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 如果大于2 并且小于6 变0&lt;/span>
&lt;span class="n">t1&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># and &amp;amp;, or |, not ~&lt;/span>
&lt;span class="n">t1&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;span class="c1"># np.where&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">condition&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">满足条件输出&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">否则&lt;/span>&lt;span class="n">y&lt;/span>
&lt;span class="n">score&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">88&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">82&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">81&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">81&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="bp">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组的添加删除和去重">数组的添加,删除和去重&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 添加&lt;/span>
&lt;span class="c1"># 1. append &lt;/span>
&lt;span class="c1"># 末尾添加值,输入数组维度必须匹配 arr,value,axis&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="c1"># axis无定义,展开一维数组,末尾添加&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 沿axis=0,添加至最后一行&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 沿axis=1,添加到末尾列&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,[[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]],&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 2. insert&lt;/span>
&lt;span class="c1"># axis给定轴,否则展开成一维数组 arr index value axis&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 沿0轴广播&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># [[ 1 2]&lt;/span>
&lt;span class="c1"># [11 11]&lt;/span>
&lt;span class="c1"># [ 3 4]&lt;/span>
&lt;span class="c1"># [ 5 6]]&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 删除&lt;/span>
&lt;span class="n">arr&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 删除之前数组被展开&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 删除每一行中的第二列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 数组去重&lt;/span>
&lt;span class="c1"># numpy.unique &lt;/span>
&lt;span class="c1"># arr&lt;/span>
&lt;span class="c1"># return_index 如果为true,返回新元素在旧列表的位置下标&lt;/span>
&lt;span class="c1"># return_inverse 如果为true,返回旧元素在新列表的位置下标&lt;/span>
&lt;span class="c1"># return_counts 如果为true 返回去重数组中的元素在原数组中的出现次数&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1">#去重数组的索引数组&lt;/span>
&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">indices&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unique&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">return_index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">indices&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># #去重数组的下标&lt;/span>
&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">indices&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unique&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">return_inverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">indices&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># # 返回去重元素的重复数量&lt;/span>
&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">indices&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unique&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">return_counts&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="numpy计算">numpy计算&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 1. 统计函数&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mean&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 标准差&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 极值&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ptp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 协方差&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">var&lt;/span>
&lt;span class="c1"># 中位数&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cov&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">median&lt;/span>
&lt;span class="c1"># 2. 数据比较&lt;/span>
&lt;span class="c1"># 第一个参数中的每一个数与第二个参数比较返回大的 广播机制&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">maximum&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">#[0 0 0 1 2]&lt;/span>
&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">minimum&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 大小一致，每个元素比较&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">maximum&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;span class="c1"># 3. 返回给定axis上的累计和&lt;/span>
&lt;span class="n">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cumsum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="err">每行依次累计相加&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cumsum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 4. argmin求最小值索引&lt;/span>
&lt;span class="n">score&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mf">80.88&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">62&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">71&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">81&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argmin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组拼接">数组拼接&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 1. 维度相同&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="c1"># 四行两列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concatenate&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concatenate&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 2. 根据轴堆叠&lt;/span>
&lt;span class="c1"># 三维数组&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 3. 矩阵拼接&lt;/span>
&lt;span class="c1">#矩阵垂直拼接&lt;/span>
&lt;span class="n">v1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;span class="n">v2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[[&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">23&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;span class="c1"># [[ 0 1 2 3 4 5]&lt;/span>
&lt;span class="c1"># [ 6 7 8 9 10 11]&lt;/span>
&lt;span class="c1"># [12 13 14 15 16 17]&lt;/span>
&lt;span class="c1"># [18 19 20 21 22 23]]&lt;/span>
&lt;span class="c1">#矩阵水平拼接&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hstack&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数组分割">数组分割&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="c1"># ary 被分割的数组&lt;/span>
&lt;span class="c1"># indices_or_sections 整数,用平均数切分;数组,沿轴 左开右闭&lt;/span>
&lt;span class="c1"># axis 轴 默认0 横向&lt;/span>
&lt;span class="n">arr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#[array([[0, 1, 2]]), array([[3, 4, 5]]), array([[6, 7, 8]])]&lt;/span>
&lt;span class="c1"># 水平分割&lt;/span>
&lt;span class="c1"># floor 向下取整&lt;/span>
&lt;span class="n">harr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hsplit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">harr&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 垂直分割&lt;/span>
&lt;span class="n">arr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vsplit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="nan-inf">nan inf&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">a&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inf&lt;/span>
&lt;span class="c1"># 判断数组中nan的个数(float数组才能赋值nan)&lt;/span>
&lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">dtype&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">float&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 判断非0的个数&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count_nonzero&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 三行四列的数改成nan&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;span class="n">nan&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;span class="c1">#结果为True&lt;/span>
&lt;span class="c1"># 结合判断nan的个数&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count_nonzero&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#nan和任何数计算都为nan&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># 将nan替换为0&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isnan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="二维数组转置">二维数组转置&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="c1"># 对换数组的维度&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transpose&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 函数用于交换数组的两个轴&lt;/span>
&lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">swapaxes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="练习">练习&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;float&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 将数组中的一部分替换nan&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 遍历每一列，然后判断每一列是否有nan&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]):&lt;/span>
&lt;span class="c1"># 获取当前列数据&lt;/span>
&lt;span class="n">temp_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># 判断当前列的数据中是否含有nan&lt;/span>
&lt;span class="n">nan_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count_nonzero&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp_col&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="n">temp_col&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="n">nan_num&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># 条件成立说明含有nan&lt;/span>
&lt;span class="c1"># 将这一列不为nan的数据拿出来&lt;/span>
&lt;span class="n">temp_col_not_nan&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">temp_col&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">temp_col&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="n">temp_col&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># 将nan替换成这一列的平均值&lt;/span>
&lt;span class="n">temp_col&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isnan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp_col&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp_col_not_nan&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>逻辑思维(1)--费米估算</title><link>http://localhost:1313/post/%E9%80%BB%E8%BE%91%E6%80%9D%E7%BB%B4-%E8%B4%B9%E7%B1%B3%E4%BC%B0%E7%AE%97/</link><pubDate>Sun, 20 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/%E9%80%BB%E8%BE%91%E6%80%9D%E7%BB%B4-%E8%B4%B9%E7%B1%B3%E4%BC%B0%E7%AE%97/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>费米估算&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;ul>
&lt;li>一个正常成年人有多少根头发？&lt;/li>
&lt;li>北京有多少个加油站？&lt;/li>
&lt;li>一辆公交车里能装下多少个乒乓球？&lt;/li>
&lt;/ul>
&lt;p>需要被考察者在有限的时间，有限的资源的情况下，对问题进行分析，最终得出一个经得起推敲的答案。
这类问题英文称之为Fermi problem。即「费米问题」&lt;/p>
&lt;h2 id="假如需估算深圳市丰田汽车的数量">假如需估算深圳市丰田汽车的数量？&lt;/h2>
&lt;h4 id="1-top-downbottom-up法则">1. Top-down，bottom-up法则&lt;/h4>
&lt;p>&lt;strong>先top-down分析：&lt;/strong>&lt;/p>
&lt;p>假设已知深圳市全市共有机动车300万辆&lt;br>
在深圳市几个车流密集区域采样，记录每100辆车中丰田车的占比，取平均占比。&lt;br>
假如为25% 300万×25%=75万辆&lt;/p>
&lt;p>&lt;strong>再bottom-up分析：&lt;/strong>&lt;/p>
&lt;p>假设已知深圳全市有「特斯拉」8万辆&lt;br>
在某地多点采样得出，在每100辆汽车车中，「特斯拉」车的占比为2%，丰田车的占比为20%。8万/2 * 20%= 80万辆&lt;/p>
&lt;p>不难看出，以上两个分析的出发角度是不同的。&lt;br>
前者从宏观往下，取得平均占比后，乘以总数，得到丰田车的数量。&lt;br>
后者从微观往上，以另一款汽车「特斯拉」作为切入，反推丰田车的数量。&lt;/p>
&lt;p>得到75万，80万的这两个数字，差距在一定的范围内，则认为这个数据是可以取信的。&lt;/p>
&lt;h4 id="2-误差分析">2. 误差分析&lt;/h4>
&lt;ul>
&lt;li>在对丰田汽车采样的时候，若只取了口岸附近的车流密集区，则占比有可能偏高&lt;/li>
&lt;li>在对特斯拉进行采样时，若取样地点是「特斯拉充电桩」附近，同样也会造成数据偏高的情况。&lt;/li>
&lt;/ul>
&lt;p>当然这里对于误差的分析，可以再多些维度。比如日本企业聚集区，特斯拉某次大促后的时间点，采样的时间是工作日还说周末等都可能是造成误差的因素，这里就不再展开了。有了估算数据和误差分析，基本上一个费米问题的解答就算是OK了。&lt;/p>
&lt;h2 id="估算杭州每年奶茶店的规模大小">估算杭州每年奶茶店的规模大小？&lt;/h2>
&lt;h4 id="1-明确问题">1. 明确问题&lt;/h4>
&lt;p>Q:问的是杭州每年奶茶店的规模大小，规模大小具体指的是什么？&lt;br>
A:规模大小指的是奶茶店的销售额大小&lt;br>
Q:奶茶店的销售额是指仅仅销售奶茶的收入，还是包括奶茶店里别的饮料和面包等食品？&lt;br>
A:奶茶店的销售额指的是所有饮品（不统计面包这类食品）&lt;/p>
&lt;h4 id="2-分析是需求端问题还是供给端问题或者两个角度都不是">2. 分析是需求端问题还是供给端问题，或者两个角度都不是&lt;/h4>
&lt;p>这个问题问的是杭州每年奶茶店的规模，是一个地域的市场规模，这类问题一般可从需求端（消费者）切入，因为杭州常住人口是一个可知的数字。初步判定可从需求端出发。&lt;/p>
&lt;h4 id="3-问题拆解">3. 问题拆解&lt;/h4>
&lt;p>&lt;strong>列公式&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>杭州每年奶茶店的规模大小=杭州常住人口* 渗透率* 50* 饮品单价* 每人每周续购杯数&lt;/li>
&lt;/ul>
&lt;p>从需求端将未知问题拆解成元素后，我们发现：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>杭州常住人口数是已知的，这属于常识，目前是1000万左右。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>渗透率指的是有多少比例的人会选择喝奶茶，这个比例需要我们估算。估算的时候要避免改变数值真实范围，不能估算的太离谱。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>这里主要是考察&lt;strong>边界&lt;/strong>问题，我们在回答的时候可以说通过样本估算。比如我随机选择100位朋友，看100位朋友中有多少人是符合条件的，从而估算出渗透率。&lt;/p>
&lt;p>这里还有一个关键问题，不同年龄段的人喝奶茶的频率是不一样的。根据生活经验，年轻人喝奶茶次数会比中年人喝老年人高，所以我们可以通过&lt;strong>MECE&lt;/strong>法则将杭州常住人口分为小孩、年轻人、中年人和老年人，计算公式依然没有变，最终相加各类型的规模大小即可。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>每人每周续购杯数：解决办法同上：指的是一年约有52周，是已知&lt;/p>
&lt;/li>
&lt;li>
&lt;p>数饮品单价： 根据我们的生活常识，蜜雪冰城的奶茶均价8元，喜茶的奶茶均价在30元一杯。所以饮品单价我们可取15元一杯。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="4-计算">4. 计算&lt;/h4>
&lt;p>杭州每年奶茶店规模大小:（150&lt;em>0.1&lt;/em>15&lt;em>1&lt;/em>52）+（300&lt;em>0.4&lt;/em>15&lt;em>1.5&lt;/em>52）+（400&lt;em>0.1&lt;/em>15&lt;em>0.5&lt;/em>52）+（150&lt;em>0.05&lt;/em>15&lt;em>0.5&lt;/em>52)=170625万&lt;/p>
&lt;p>估算出杭州每年奶茶店的规模大小约为17亿。&lt;/p></description></item><item><title>爬取豆瓣电影1--爬虫总结</title><link>http://localhost:1313/post/%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B11-%E7%88%AC%E8%99%AB%E6%80%BB%E7%BB%93/</link><pubDate>Wed, 16 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B11-%E7%88%AC%E8%99%AB%E6%80%BB%E7%BB%93/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>美味汤使用方法&lt;/li>
&lt;li>定位标签&lt;/li>
&lt;li>获取内容&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="美味汤使用方法">美味汤使用方法&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 导入库&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;span class="kn">from&lt;/span> &lt;span class="nn">bs4&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">BeautifulSoup&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">lxml&lt;/span>
&lt;span class="n">header&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;User Agent&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s1">&amp;#39;Cookies&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s1">&amp;#39;Refeerer&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">;}&lt;/span>
&lt;span class="n">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;span class="n">page_text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">detail_url&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">content&lt;/span>
&lt;span class="c1"># 解析页面&lt;/span>
&lt;span class="n">soup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">BeautifulSoup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">page_text&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;lxml&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 定位标签&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="获取html中的script内容">获取html中的script内容&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="爬虫内容去重">爬虫内容去重&lt;/h2>
&lt;h2 id="代理随机uacookie的使用">代理，随机ua,cookie的使用&lt;/h2>
&lt;h2 id="try-exception-捕获">try exception 捕获&lt;/h2></description></item><item><title>MySQL题库(1)</title><link>http://localhost:1313/post/mysql_%E8%AF%95%E9%A2%9801/</link><pubDate>Thu, 10 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql_%E8%AF%95%E9%A2%9801/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>多条件子查询&lt;/li>
&lt;li>聚合函数条件前置&lt;/li>
&lt;li>分组取最值&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>配送表: Delivery&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Column Name&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">delivery_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">customer_id&lt;/td>
&lt;td style="text-align:center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">order_date&lt;/td>
&lt;td style="text-align:center">date&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">customer_pref_delivery_date&lt;/td>
&lt;td style="text-align:center">date&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>如果顾客期望的配送日期和下单日期相同，则该订单称为 「即时订单」，否则称为「计划订单」。
「首次订单」是顾客最早创建的订单。我们保证一个顾客只会有一个「首次订单」。&lt;/p>
&lt;p>写一条 SQL 查询语句获取即时订单在所有用户的首次订单中的比例。保留两位小数。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">delivery_id&lt;/th>
&lt;th style="text-align:center">customer_id&lt;/th>
&lt;th style="text-align:center">order_date&lt;/th>
&lt;th style="text-align:center">customer_pref_delivery_date&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2019-08-01&lt;/td>
&lt;td style="text-align:center">2019-08-02&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2019-08-02&lt;/td>
&lt;td style="text-align:center">2019-08-02&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2019-08-11&lt;/td>
&lt;td style="text-align:center">2019-08-12&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2019-08-24&lt;/td>
&lt;td style="text-align:center">2019-08-24&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2019-08-21&lt;/td>
&lt;td style="text-align:center">2019-08-22&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2019-08-11&lt;/td>
&lt;td style="text-align:center">2019-08-13&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2019-08-09&lt;/td>
&lt;td style="text-align:center">2019-08-09&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Result 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">immediate_percentage&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">50.00&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>1 号顾客的 1 号订单是首次订单，并且是计划订单。&lt;br>
2 号顾客的 2 号订单是首次订单，并且是即时订单。&lt;br>
3 号顾客的 5 号订单是首次订单，并且是计划订单。&lt;br>
4 号顾客的 7 号订单是首次订单，并且是即时订单。&lt;br>
因此，一半顾客的首次订单是即时的。&lt;/p>
&lt;p>思路：&lt;/p>
&lt;ul>
&lt;li>计算首次订单作为分母&lt;/li>
&lt;li>在首次订单基础上添加条件-订单配送日期相等筛选出即时订单作为分子&lt;/li>
&lt;li>将分母条件和分子条件左连接后 计算得出结果&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">delivery_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">delivery_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">immediate_percentage&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">delivery_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">delivery&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">order_date&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">customer_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="k">MIN&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order_date&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">customer_id&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">delivery&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">customer_id&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="n">a1&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">delivery_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">order_date&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">delivery&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">customer_pref_delivery_date&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">order_date&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="n">a2&lt;/span>
&lt;span class="k">ON&lt;/span> &lt;span class="n">a1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">delivery_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">delivery_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>优化思路：&lt;/p>
&lt;p>由于即时订单是在首次订单的基础上进行筛选 也就是说两者有共同的筛选条件
将其作为where从句部分
分子计算直接用sum函数加上条件
用到虚拟表+子查询&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql"> &lt;span class="k">select&lt;/span> &lt;span class="n">round&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order_date&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">customer_pref_delivery_date&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">immediate_percentage&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">Delivery&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">customer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">order_date&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">in&lt;/span>
&lt;span class="p">(&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">customer_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order_date&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">delivery&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">customer_id&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来源：力扣（LeetCode）&lt;/p></description></item><item><title>Pandas(1)--读取创建</title><link>http://localhost:1313/post/pandas_01_%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/</link><pubDate>Mon, 07 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/pandas_01_%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>
&lt;ol>
&lt;li>数据读取保存&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="2">
&lt;li>数据创建&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="数据读取">数据读取&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 相对路径&lt;/span>
&lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;./text.csv&amp;#39;&lt;/span>
&lt;span class="c1"># 绝对路径&lt;/span>
&lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\...\text.csv&amp;#39;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">windows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 内容有中文 encoding=&amp;#39;utf-8&amp;#39; &lt;/span>
&lt;span class="c1"># 分隔符设置sep=&amp;#39;\t&amp;#39;&lt;/span>
&lt;span class="c1"># 使用默认列名 header=None&lt;/span>
&lt;span class="c1"># 指定列名 names=[]&lt;/span>
&lt;span class="c1"># 跳行读取，不读取1,3,4 行 skiprows = [0,2,3] &lt;/span>
&lt;span class="c1"># 默认第一列为索引，第一行为行索引&lt;/span>
&lt;span class="c1"># 指定行索引 index_col = &lt;/span>
&lt;span class="c1"># 只读取前5列 nrows = &lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sep&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="n">nrows&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,)&lt;/span>
&lt;span class="c1"># sql读取&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">pymysql&lt;/span>
&lt;span class="n">conn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pymysql&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">connect&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">host&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">password&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">database&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">mysql_page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_sql&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;select * from salary&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">con&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">conn&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 默认读取前5行&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 返回行列数&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 返回列名&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 返回索引信息&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 返回每列数据类型&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dtypes&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 返回整体信息&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1"># 返回统计值&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">describe&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="err">文件写入&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建seires">创建seires&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Series&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mf">2.7&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 指定index&lt;/span>
&lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Series&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;g&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mf">2.7&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;d&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 字典创建series&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;span class="n">s2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建dataframe">创建DataFrame&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">df1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">150&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;zs&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;ls&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;ww&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;zl&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;python&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;python&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;math&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;math&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;En&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;En&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;期中&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;期末&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;期中&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;期末&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;期中&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;期末&amp;#39;&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Pandas(2)--查询数据</title><link>http://localhost:1313/post/pandas_02_%E6%9F%A5%E8%AF%A2/</link><pubDate>Mon, 07 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/pandas_02_%E6%9F%A5%E8%AF%A2/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>
&lt;ol>
&lt;li>iloc 行列数字位置&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="2">
&lt;li>loc 行列标签值 既能查询又能覆盖&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="3">
&lt;li>df[]查询&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;ol start="4">
&lt;li>df.at df.iat 单元格查询&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="查询方式">查询方式&lt;/h2>
&lt;h5 id="行列选取单维度选取df">行（列）选取（单维度选取）：df[]。&lt;/h5>
&lt;p>这种情况一次只能选取行或者列，即一次选取中，只能为行或者列设置筛选条件（只能为一个维度设置筛选条件）。&lt;/p>
&lt;h5 id="区域选取多维选取dflocdfilocdfix">区域选取（多维选取）：df.loc[]，df.iloc[]，df.ix[]。&lt;/h5>
&lt;p>这种方式可以同时为多个维度设置筛选条件。&lt;/p>
&lt;h5 id="单元格选取点选取dfatdfiat">单元格选取（点选取）：df.at[]，df.iat[]。&lt;/h5>
&lt;p>准确定位一个单元格。&lt;/p>
&lt;p>从dataframe查询
只查询一列返回series;多列返回df&lt;/p>
&lt;h2 id="导入数据">导入数据&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;span class="c1"># 文件内有中文, utf-8 编码&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\aholaaaaaa\Desktop\katiaaaa\CDA\python show\pandas\data\BJ_tianqi.csv&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">encoding&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 改变索引列，并在原df上修改inplace&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;日期&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">inplace&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># 查看数据&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">describe&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;span class="s1"> 最高温度 最低温度 天气 风向 风级 空气质量
&lt;/span>&lt;span class="s1">日期
&lt;/span>&lt;span class="s1">2019/1/1 1℃ -10℃ 晴~多云 西北风 1级 良
&lt;/span>&lt;span class="s1">2019/1/2 1℃ -9℃ 多云 东北风 1级 良
&lt;/span>&lt;span class="s1">2019/1/3 2℃ -7℃ 霾 东北风 1级 中度污染
&lt;/span>&lt;span class="s1">2019/1/4 2℃ -7℃ 晴 西北风 2级 优
&lt;/span>&lt;span class="s1">2019/1/5 0℃ -8℃ 多云 东北风 2级 优
&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;℃&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;int32&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;℃&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;int32&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dtypes&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="返回多行多列">返回多行多列&lt;/h2>
&lt;p>loc方法使用方法：DataFrame.loc[ 行索引名称或条件 , 列索引名称 ],闭区间（含最后一个值）&lt;br>
iloc方法的使用方法：DataFrame.iloc[ 行索引位置 , 列索引位置 ],开区间（不含最后一个值）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 返回一行&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/2&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/2&amp;#39;&lt;/span>&lt;span class="p">,:])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,:])&lt;/span>
&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;span class="s1">最高温度 1℃
&lt;/span>&lt;span class="s1">最低温度 -9℃
&lt;/span>&lt;span class="s1">天气 多云
&lt;/span>&lt;span class="s1">风向 东北风
&lt;/span>&lt;span class="s1">风级 1级
&lt;/span>&lt;span class="s1">空气质量 良
&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;span class="c1"># 返回多行&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;2&amp;#39;&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">],:])&lt;/span>
&lt;span class="c1"># 返回一列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 返回多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[:,[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:,[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="单个label值查询行列">单个label值查询(行/列)&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># df.at[]只能使用标签索引，df.iat[]只能使用整数索引&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iat&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用值列表批量查询">使用值列表批量查询&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 一行多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="c1"># 多行一列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;2019/1/4&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 多行多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;2019/1/4&amp;#39;&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">],[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数值区间查询">数值区间查询&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 多行&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;2019/1/4&amp;#39;&lt;/span>&lt;span class="p">,:])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;2019/1/4&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,:])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 多行一列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;2019/1/5&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 一行多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;风向&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 多行多列&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;2019/1/5&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;风向&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用条件表达式查询">使用条件表达式查询&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 筛选行&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,:])&lt;/span>
&lt;span class="n">perfect_w&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;天气&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s1">&amp;#39;晴&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;空气质量&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s1">&amp;#39;良&amp;#39;&lt;/span>&lt;span class="p">),:]&lt;/span>
&lt;span class="c1"># 对行和列同时进行筛选&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;空气质量&amp;#39;&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="调用函数查询">调用函数查询&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">:]&lt;/span>
&lt;span class="k">def&lt;/span> &lt;span class="nf">query_my_data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">):&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/9&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;空气质量&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s1">&amp;#39;良&amp;#39;&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">query_my_data&lt;/span>&lt;span class="p">,:])&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="df-查询">df[] 查询&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="c1"># 整数索引切片：前闭后开&lt;/span>
&lt;span class="c1"># 选取第一行&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># 选取前两行&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># 标签索引切片：前闭后闭&lt;/span>
&lt;span class="c1"># 选取第一行：&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="s1">&amp;#39;2019/1/1&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># 选取前两行:&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;2019/1/1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;2019/1/2&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># 布尔数组&lt;/span>
&lt;span class="c1"># 所有最高温度大于15的行&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="n">each&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">15&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]]])&lt;/span>
&lt;span class="k">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1"># 选取所有最高温度大于15的行且空气质量为良的行&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;空气质量&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s1">&amp;#39;良&amp;#39;&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;span class="c1"># 选取所有最高温度为15或20的行&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;span class="c1"># 列选取：&lt;/span>
&lt;span class="c1"># 列选取方式也有三种：标签索引、标签列表、Callable对象&lt;/span>
&lt;span class="c1"># a）标签索引：选取单个列&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="c1"># b）标签列表：选取多个列&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;最高温度&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;最低温度&amp;#39;&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;span class="c1"># c）callable对象&lt;/span>
&lt;span class="c1"># 选取第一列&lt;/span>
&lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>爬取豆瓣电影1-数据库表格存储设计</title><link>http://localhost:1313/post/%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B13-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%A0%BC%E5%AD%98%E5%82%A8%E8%AE%BE%E8%AE%A1/</link><pubDate>Sat, 05 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B13-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%A0%BC%E5%AD%98%E5%82%A8%E8%AE%BE%E8%AE%A1/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>爬取对象, 目的&lt;/li>
&lt;li>表格设计字段及思路&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="爬取对象">爬取对象&lt;/h2>
&lt;ul>
&lt;li>爬取豆瓣所有的电影基本信息&lt;/li>
&lt;/ul>
&lt;p>刚学会request和美味汤的我，熊心豹子胆的定下了这个目标。
爬取过程中会遇到很多的问题，嵌套嵌套嵌到晕。俺不怵！&lt;/p>
&lt;h2 id="爬取目的">爬取目的&lt;/h2>
&lt;ul>
&lt;li>以豆瓣评分为基础 分析高质量电影的类别，国家分布&lt;/li>
&lt;li>以豆瓣评价人数为基础 分析热门电影的类别分布，国家分布&lt;/li>
&lt;li>以豆瓣电影时间为基础 分析电影产出类别，国家分布&lt;/li>
&lt;li>以上述结论为基础 分析电影产量和电影质量的相关性&lt;/li>
&lt;li>以上述结论为基础 分析高质量电影和热门电影的相关性&lt;/li>
&lt;/ul>
&lt;h2 id="数据存储">数据存储&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>将爬取的数据存储到mysql数据库中&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建表每个字段的数据类型确定&lt;/p>
&lt;p>&lt;strong>电影信息表：&lt;/strong>&lt;br>
主键id 豆瓣id&lt;br>
电影中文名 电影英文名&lt;br>
年代 国家 片长 图片链接&lt;br>
评价分数 评价人数 评价五星占比
短评数量 长评数量&lt;/p>
&lt;p>&lt;strong>电影类型表:&lt;/strong>&lt;br>
主键id 豆瓣id 类型&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一个英文一个字节，一个中文三、四个字节;&lt;/p>
&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字段&lt;/th>
&lt;th>格式&lt;/th>
&lt;th>名称&lt;/th>
&lt;th>其他&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>主键id&lt;/td>
&lt;td>&lt;code>primary key auto_increment&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>film_id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>豆瓣id&lt;/td>
&lt;td>&lt;code>not null&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ch_name&lt;/td>
&lt;td>varchar(40)&lt;/td>
&lt;td>中文名&lt;/td>
&lt;td>&lt;code>not null&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">
&lt;span class="k">create&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">film_info&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">primary&lt;/span> &lt;span class="k">key&lt;/span> &lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">film_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;豆瓣id&amp;#39;&lt;/span> &lt;span class="k">not&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">ch_name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">140&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;中文名&amp;#39;&lt;/span> &lt;span class="k">not&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="p">,&lt;/span>
&lt;span class="n">en_name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;英文名&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">year&lt;/span> &lt;span class="k">year&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;年份&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">country&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;国家&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">film_length&lt;/span> &lt;span class="nb">smallint&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;片长&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">score&lt;/span> &lt;span class="nb">float&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;评分&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">five_portion&lt;/span> &lt;span class="nb">float&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;五星占比&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">four_portion&lt;/span> &lt;span class="nb">float&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;四星占比&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">three_portion&lt;/span> &lt;span class="nb">float&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;三星占比&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">two_portion&lt;/span> &lt;span class="nb">float&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;二星占比&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">one_portion&lt;/span> &lt;span class="nb">float&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;一星占比&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">score_num&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;评分人数&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">short_comment&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;短评人数&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">long_comment&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">comment&lt;/span>&lt;span class="s1">&amp;#39;长评人数&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">img_link&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">150&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;图片链接&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">uft8mb4&lt;/span>
&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">create&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">film_type&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">primary&lt;/span> &lt;span class="k">key&lt;/span> &lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">film_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;豆瓣id&amp;#39;&lt;/span> &lt;span class="k">not&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">type&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">comment&lt;/span> &lt;span class="s1">&amp;#39;电影类型&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span>
&lt;span class="n">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pymysql&lt;/span>
&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;span class="n">conn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pymysql&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">connect&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">host&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">password&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;8866&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">database&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;movie_data&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf8mb4&amp;#39;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;span class="s1">select * from film_info
&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;span class="n">mysql_page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_sql&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">con&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">conn&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL(7)--多表查询</title><link>http://localhost:1313/post/mysql-7%E8%A1%A8%E8%BF%9E%E6%8E%A5%E7%B1%BB%E5%9E%8B/</link><pubDate>Wed, 02 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-7%E8%A1%A8%E8%BF%9E%E6%8E%A5%E7%B1%BB%E5%9E%8B/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>INNER JOIN 内连接&lt;/li>
&lt;li>OUTER JOIN 外连接&lt;/li>
&lt;li>CROSS JOIN 交叉连接&lt;/li>
&lt;li>UNION 并集查询&lt;/li>
&lt;li>自连接&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>&lt;img src="https://files.catbox.moe/43gwfq.png" alt="">&lt;/p>
&lt;h2 id="内连接等值连接">&lt;strong>内连接/等值连接&lt;/strong>&lt;/h2>
&lt;p>取两表交集部分 根据每个表共有的列的值匹配两个表中的行&lt;/p>
&lt;ul>
&lt;li>隐式内连接&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">B&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>　　&lt;/p>
&lt;ul>
&lt;li>显式内连接&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">A&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">B&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>示例：&lt;/strong>&lt;br>
employee:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">employee_id&lt;/th>
&lt;th style="text-align:center">department_id&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>salary:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">id&lt;/th>
&lt;th style="text-align:center">employee_id&lt;/th>
&lt;th style="text-align:center">amount&lt;/th>
&lt;th style="text-align:center">pay_date&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">9000&lt;/td>
&lt;td style="text-align:center">2017-03-31&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">6000&lt;/td>
&lt;td style="text-align:center">2017-03-31&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">10000&lt;/td>
&lt;td style="text-align:center">2017-03-31&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">7000&lt;/td>
&lt;td style="text-align:center">2017-02-28&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">6000&lt;/td>
&lt;td style="text-align:center">2017-02-28&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">8000&lt;/td>
&lt;td style="text-align:center">2017-02-28&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">department_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">amount&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="n">e&lt;/span>
&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">salary&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>内连接表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">employee_id&lt;/th>
&lt;th style="text-align:center">department_id&lt;/th>
&lt;th style="text-align:center">amount&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">9000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">6000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">10000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">7000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">6000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">8000&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="外连接">&lt;strong>外连接&lt;/strong>&lt;/h2>
&lt;p>如果使用左连接，则主表在它左边；如果使用右连接，则主表在它右边
查询结果以主表为主，从表记录匹配不到，则填充null&lt;/p>
&lt;ul>
&lt;li>左外连接: LEFT (OUTER) JOIN&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">department_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">amount&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="n">e&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">salary&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">department_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">amount&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="n">e&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">salary&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>右外连接: RIGHT (OUTER) JOIN&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">department_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">amount&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="n">e&lt;/span>
&lt;span class="k">RIGHT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">salary&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">employee_id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>取坐标&lt;/li>
&lt;/ul>
&lt;h2 id="交叉连接笛卡尔积">&lt;strong>交叉连接/笛卡尔积&lt;/strong>&lt;/h2>
&lt;p>返回的结果为被连接的两个数据表的乘积&lt;/p>
&lt;ul>
&lt;li>隐式交叉连接&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>显式交叉连接&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">A&lt;/span>
&lt;span class="k">CROSS&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="using子句简化表连接">using子句简化表连接&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employee&lt;/span>
&lt;span class="k">JOIN&lt;/span> &lt;span class="n">dept&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">deptno&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dept&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">deptno&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employee&lt;/span>
&lt;span class="k">JOIN&lt;/span> &lt;span class="n">dept&lt;/span> &lt;span class="k">USING&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">deptno&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="三表连接">三表连接&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">last_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">first_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dept_name&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employees&lt;/span> &lt;span class="n">a&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">dept_emp&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emp_no&lt;/span>
&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">departments&lt;/span> &lt;span class="k">c&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_no&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dept_no&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL(8)--交换数据</title><link>http://localhost:1313/post/mysql-8%E8%A1%8C%E5%88%97%E8%BD%AC%E6%8D%A2/</link><pubDate>Wed, 02 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-8%E8%A1%8C%E5%88%97%E8%BD%AC%E6%8D%A2/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>行内容互换&lt;/li>
&lt;li>行列内容转换&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="座位号互换">座位号互换&lt;/h2>
&lt;p>有一张 seat 座位表，平时用来储存学生名字和与他们相对应的座位 id。其中纵列的 id 是连续递增的。 小美想改变相邻俩学生的座位。&lt;/p>
&lt;p>seat:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">id&lt;/th>
&lt;th style="text-align:center">student&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Abbot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Doris&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">Emerson&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">Green&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">Jeames&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>在原表中插入一列叫做‘奇偶数’，对应表示“座位号”的值是“奇数”还是“偶数”。&lt;/p>
&lt;p>1）如果原来座位号是奇数的学生，换座位后，这名学生的座位号变为“座位号+1”。&lt;br>
2）如果原来座位号是偶数的学生，换座位后，这名学生的座位号变为“座位号-1”。&lt;/p>
&lt;p>sql求余函数：mod(n,m) 返回n除以m的余数。如果n除以2的余数是0，说明n是偶数，否则是奇数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">mod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;span class="k">AND&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">counts&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">mod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;span class="k">AND&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">counts&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">id&lt;/span>
&lt;span class="k">ELSE&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;span class="k">END&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">student&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">seat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">counts&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">seat&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="n">b&lt;/span>
&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="行列互换">行列互换&lt;/h3>
&lt;p>Department:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">id&lt;/th>
&lt;th style="text-align:center">revenue&lt;/th>
&lt;th style="text-align:center">month&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">8000&lt;/td>
&lt;td style="text-align:center">Jan&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">9000&lt;/td>
&lt;td style="text-align:center">Jan&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">10000&lt;/td>
&lt;td style="text-align:center">Feb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">7000&lt;/td>
&lt;td style="text-align:center">Feb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">6000&lt;/td>
&lt;td style="text-align:center">Mar&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>来源：力扣（LeetCode）&lt;/p>
&lt;p>编写一个 SQL 查询来重新格式化表，使得新的表中有一个部门 id 列和一些对应 每个月 的收入（revenue）列&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">id&lt;/th>
&lt;th style="text-align:center">Jan_Revenue&lt;/th>
&lt;th style="text-align:center">Feb_Revenue&lt;/th>
&lt;th style="text-align:center">Mar_Revenue&lt;/th>
&lt;th style="text-align:center">&amp;hellip;&lt;/th>
&lt;th style="text-align:center">Dec_Revenue&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">8000&lt;/td>
&lt;td style="text-align:center">7000&lt;/td>
&lt;td style="text-align:center">6000&lt;/td>
&lt;td style="text-align:center">&amp;hellip;&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">9000&lt;/td>
&lt;td style="text-align:center">null&lt;/td>
&lt;td style="text-align:center">null&lt;/td>
&lt;td style="text-align:center">&amp;hellip;&lt;/td>
&lt;td style="text-align:center">null&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">null&lt;/td>
&lt;td style="text-align:center">10000&lt;/td>
&lt;td style="text-align:center">null&lt;/td>
&lt;td style="text-align:center">&amp;hellip;&lt;/td>
&lt;td style="text-align:center">null&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>1. 输出行列互换的表结构&lt;/strong>
Select id, Jan_Revenue, Feb_Revenue&amp;hellip; Dec_Revenue from department;&lt;br>
可以用case语句进行条件判断来替换。id和月份匹配，则为对应值，不匹配则为0。&lt;/p>
&lt;p>&lt;strong>2. 去掉0值，简化表格的行数&lt;/strong>&lt;br>
使用分组汇总来实现。按“id”分组，然后用汇总函数（max）取出每组非零的值(也就是这个案例中的id某月对应的数值)。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Jan&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Jan_Revenue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Feb&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Feb_Revenue&lt;/span>
&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Mar&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Mar_Revenue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Apr&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Apr_Revenue&lt;/span>
&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;May&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">May_Revenue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Jun&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Jun_Revenue&lt;/span>
&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Jul&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Jul_Revenue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Aug&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Aug_Revenue&lt;/span>
&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Sep&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Sep_Revenue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Oct&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Oct_Revenue&lt;/span>
&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Nov&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Nov_Revenue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="k">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Dec&amp;#39;&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">revenue&lt;/span>
&lt;span class="k">END&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Dec_Revenue&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">department&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">id&lt;/span>
&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来源：力扣（LeetCode）&lt;/p></description></item><item><title>MySQL(9)--建表，增删改</title><link>http://localhost:1313/post/mysql-9%E5%BB%BA%E5%88%A0%E6%9B%B4%E6%96%B0%E8%A1%A8/</link><pubDate>Wed, 02 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-9%E5%BB%BA%E5%88%A0%E6%9B%B4%E6%96%B0%E8%A1%A8/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>数据类型&lt;/li>
&lt;li>建表&lt;/li>
&lt;li>查表&lt;/li>
&lt;li>改表&lt;/li>
&lt;li>删表&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="数据类型">数据类型&lt;/h2>
&lt;h3 id="1-整数类型">1. 整数类型&lt;/h3>
&lt;p>tinyint 1个字节&lt;br>
smallint 2个字节 &lt;br>
mediumint 3个字节 &lt;br>
int integer 4个字节 (默认类型) &lt;br>
bigint 8个字节 (时间戳)&lt;/p>
&lt;h3 id="2-浮点类型位类型">2. 浮点类型/位类型&lt;/h3>
&lt;p>float&lt;br>
double (超过10位，选double)&lt;/p>
&lt;h3 id="3-时间和日期">3. 时间和日期&lt;/h3>
&lt;p>date 年和日&lt;br>
datetime 年月日时分秒&lt;br>
timestamp 时间戳&lt;br>
time&lt;br>
year&lt;/p>
&lt;h3 id="4-字符串类型">4. 字符串类型&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>char系列字符串&lt;br>
char(M) 0-225 之间的整数 char(4) (长度为4)&lt;br>
varchar(M) 0-65535 之间的整数&lt;br>
(需要经常发生变化，选择varchar)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>text系列字符串 - 存储大量的字符&lt;br>
tinytext 字节： 0-225 值得长度为+2 个字节&lt;br>
text 字节： 0-65 535 值得长度为+2 个字节&lt;br>
mediumtext 字节： 0-167 772 150 值得长度为+3 个字节&lt;br>
longtext 字节： 0-4 294 967 295 值得长度为+4 个字节&lt;/p>
&lt;/li>
&lt;li>
&lt;p>char varchar text 的区别&lt;br>
都可以存储字符串类型的数据&lt;br>
char varchar 可以指定最大的字符长度 text 不可以;&lt;br>
char 自动用空格填充 varchar 不进行空格自动填充;&lt;br>
text 存储可长度的非空 unicode 数据;&lt;br>
一个英文一个字节，一个中文四个字节;&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="建表">建表&lt;/h2>
&lt;h3 id="1-建表">1. 建表&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">查看所有数据库&lt;/span>
&lt;span class="k">SHOW&lt;/span> &lt;span class="n">databases&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">进入数据库&lt;/span>
&lt;span class="n">USE&lt;/span> &lt;span class="k">database&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">查看所有表&lt;/span>
&lt;span class="k">SHOW&lt;/span> &lt;span class="n">tables&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">建表&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">age&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">birthday&lt;/span> &lt;span class="n">datetime&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-限制列内容-not-null">2. 限制列内容 not null&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katia&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">NULL&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">age&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">birthday&lt;/span> &lt;span class="n">datetime&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-default-默认值设置">3. default 默认值设置&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaq&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;名字&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">age&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">DEFAULT&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">birthday&lt;/span> &lt;span class="n">datetime&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-设置主键">4. 设置主键&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">建表设置单一主键&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaa&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">PRIMARY&lt;/span> &lt;span class="k">KEY&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;用户id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;名字&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">age&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">DEFAULT&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">birthday&lt;/span> &lt;span class="n">datetime&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">建表设置联合主键&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaaFavorite&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">katiaa_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;用户id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">article_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;文章id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">add_time&lt;/span> &lt;span class="n">datetime&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;收藏时间&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">PRIMARY&lt;/span> &lt;span class="k">KEY&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">katiaa_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">article_id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">建表后&lt;/span>&lt;span class="n">ALTER增加主键&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaaafavorite&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">katiaaa_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;用户id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">article_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;文章id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">add_time&lt;/span> &lt;span class="n">datetime&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;收藏时间&amp;#39;&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="k">ALTER&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaaafavorite&lt;/span>
&lt;span class="k">ADD&lt;/span> &lt;span class="k">PRIMARY&lt;/span> &lt;span class="k">KEY&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">katiaaa_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">article_id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="n">ALTER删除主键&lt;/span>
&lt;span class="k">ALTER&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaaafavorite&lt;/span>
&lt;span class="k">DROP&lt;/span> &lt;span class="k">PRIMARY&lt;/span> &lt;span class="k">KEY&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5-设置唯一值">5. 设置唯一值&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">建表语句设置唯一值&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaa&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">UNIQUE&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;用户id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;名字&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">age&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">DEFAULT&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">birthday&lt;/span> &lt;span class="n">datetime&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">建表后&lt;/span>&lt;span class="n">ALTER语句增加唯一值&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaa&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">katiaa_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;用户id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">article_id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;文章id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">add_time&lt;/span> &lt;span class="n">datetime&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;收藏时间&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">UNIQUE&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">katiaa_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">article_id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="k">ALTER&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katiaa&lt;/span>
&lt;span class="k">ADD&lt;/span> &lt;span class="k">UNIQUE&lt;/span> &lt;span class="k">KEY&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">katiaa_id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="6-自增长">6. 自增长&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">建表设置自增长&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katia&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">PRIMARY&lt;/span> &lt;span class="k">KEY&lt;/span> &lt;span class="n">AUTO_INCREMENT&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;用户id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="k">COMMENT&lt;/span> &lt;span class="s1">&amp;#39;名字&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">age&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="k">DEFAULT&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">birthday&lt;/span> &lt;span class="n">datetime&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">建表后更改自增长&lt;/span>
&lt;span class="k">ALTER&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katia&lt;/span>
&lt;span class="n">CHANGE&lt;/span> &lt;span class="k">COLUMN&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span> &lt;span class="n">AUTO_INCREMENT&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">删除自增长&lt;/span>
&lt;span class="k">ALTER&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">katia&lt;/span>
&lt;span class="k">MODIFY&lt;/span> &lt;span class="k">COLUMN&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="7-改表">7. 改表&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="c1">-- 删除列
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">vendors&lt;/span> &lt;span class="k">DROP&lt;/span> &lt;span class="k">COLUMN&lt;/span> &lt;span class="n">vend_phone&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- 添加列：
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">vendors&lt;/span> &lt;span class="k">ADD&lt;/span> &lt;span class="n">vend_phone&lt;/span> &lt;span class="nb">CHAR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">-- 删除表及结构
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">DROP&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">customers&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- 执行语句将永久删除该表
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">-- 表重命名
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">RENAME&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">customer&lt;/span> &lt;span class="k">TO&lt;/span> &lt;span class="n">customers2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">alter&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">film&lt;/span> &lt;span class="k">rename&lt;/span> &lt;span class="k">to&lt;/span> &lt;span class="n">filmm&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- 修改行内容
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">UPDATE&lt;/span> &lt;span class="n">customers&lt;/span>
&lt;span class="k">SET&lt;/span> &lt;span class="n">cust_email&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;elmer@fudd.com&amp;#39;&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="n">cust_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10005&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- delete 删除一行
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">customers&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="n">cust_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10006&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">-- 若没有WHERE语句，则删除表中每个客户
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>excel函数</title><link>http://localhost:1313/post/excel%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/</link><pubDate>Tue, 01 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/excel%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>日期函数&lt;/li>
&lt;li>文本函数&lt;/li>
&lt;li>逻辑函数&lt;/li>
&lt;li>统计函数&lt;/li>
&lt;li>查找引用函数&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="日期函数">日期函数&lt;/h2>
&lt;h4 id="1date">1.Date&lt;/h4>
&lt;p>功能：将提取的数字变为日期格式进行显示。&lt;/p>
&lt;p>语法：DATE（year,month,day）&lt;/p>
&lt;p>释义：公式中的三个参数分别为年，月，日，对应填入就可以将数字组合成为日期。&lt;/p>
&lt;h4 id="2-day">2. Day&lt;/h4>
&lt;p>功能：返回一个月中的第几天的数值，介于1到31之间。&lt;/p>
&lt;p>语法：day(serial_number)&lt;/p>
&lt;p>释义：Serial_number为要查找的天数日期。
日期有多种输入方式：带引号的文本串（例如&amp;quot;1998/01/30&amp;quot;）、
系列数（例如，如果使用 1900 日期系统则 35825 表示 1998 年 1 月 30 日）或其他公式或函数的结果（例如 DATEVALUE(&amp;ldquo;1998/1/30&amp;rdquo;)）。&lt;/p>
&lt;h4 id="3-edate">3. Edate&lt;/h4>
&lt;p>功能：用于计算指定日期之前或之后几个月的具体日期。&lt;/p>
&lt;p>语法：EDATE(start_date,months)&lt;/p>
&lt;p>释义：start_date：表示起始日期的日期。&lt;/p>
&lt;p>months：表示start_date 之前或之后的月份数。&lt;/p>
&lt;h4 id="4eomonth">4.Eomonth&lt;/h4>
&lt;p>功能：计算指定日期之前或者之后几个月的日期，返回结果日期的当月最后一天。&lt;/p>
&lt;p>语法：EOMONTH(start_date, months)&lt;/p>
&lt;p>释义：Start_date 是代表开始日期的一个日期。&lt;/p>
&lt;p>Months为 start_date 之前或之后的月数。正数表示未来日期，负数表示过去日期。&lt;/p>
&lt;h4 id="5-hour">5. Hour&lt;/h4>
&lt;p>功能：用于返回时间值中的小时数，返回的值范围是0～23。&lt;/p>
&lt;p>语法：HOUR(serial_number)&lt;/p>
&lt;p>释义：serial_number：表示要提取小时数的时间。&lt;/p>
&lt;h4 id="6minute">6.Minute&lt;/h4>
&lt;p>功能：返回一个指定时间值中的分钟数。&lt;/p>
&lt;p>语法：MINUTE(serial_number)&lt;/p>
&lt;p>释义：Serial_number 必需。一个时间值，其中包含要查找的分钟。时间值有多种输入方式：带引号的文本字符串（例如 &amp;ldquo;6:45 PM&amp;rdquo;）、十进制数（例如 0.78125 表示 6:45 PM）或其他公式或函数的结果（例如 TIMEVALUE(&amp;ldquo;6:45 PM&amp;rdquo;)）。&lt;/p>
&lt;h4 id="7month">7.Month&lt;/h4>
&lt;p>功能：返回月份值，且返回的值是1到12之间的整数。&lt;/p>
&lt;p>语法：MONTH（serial_number)&lt;/p>
&lt;p>释义：Serial_number 必须存在，含义：要查找的月份日期。&lt;/p>
&lt;h4 id="8networkdays">8.Networkdays&lt;/h4>
&lt;p>功能：返回开始日期和结束日期之间的所有工作日数，其中，工作日包括周末和专门指定的假期。&lt;/p>
&lt;p>语法：NETWORKDAYS(start_date,end_date,holidays)&lt;/p>
&lt;p>释义：start_date:表示开始日期。&lt;/p>
&lt;p>end_date:表示结束日期。&lt;/p>
&lt;p>holidays:在工作日中排除的特定日期。&lt;/p>
&lt;h4 id="9-today">9. today&lt;/h4>
&lt;p>功能：返回系统的当前日期。
语法：today( )
释义：该函数没有参数，只用一对括号即可。
2020/01/01&lt;/p>
&lt;h4 id="10now">10.now&lt;/h4>
&lt;p>功能：返回系统的当前日期和时间。
语法：now( )
释义：该函数没有参数，只用一对括号即可。
2020/01/01 12:00:00&lt;/p>
&lt;h4 id="11second">11.Second&lt;/h4>
&lt;p>功能：返回一个时间值中的秒数。&lt;/p>
&lt;p>语法：SECOND(serial_number)&lt;/p>
&lt;p>释义：serial_number：表示要提取秒数的时间。一分钟只有60秒，函数结果的取值范围是0-59&lt;/p>
&lt;h4 id="12weekday">12.Weekday&lt;/h4>
&lt;p>功能：返回代表一周中的第几天的数值，是一个1到7之间的整数。&lt;/p>
&lt;p>语法：WEEKDAY(serial_number，return_type)&lt;/p>
&lt;p>释义：serial_number 是要返回日期数的日期
return_type为确定返回值类型的数字，数字1 则1 至7 代表星期天到星期六，数字2 则1 至7 代表星期一到星期天，数字3则0至6代表星期一到星期天。&lt;/p>
&lt;h4 id="13weeknum">13.Weeknum&lt;/h4>
&lt;p>功能：返回位于一年中的第几周&lt;/p>
&lt;p>语法：WEEKNUM（serial_num，return_type）&lt;/p>
&lt;p>释义：参数Seria_num 必须。代表要确定它位于一年中的几周的特定日期。&lt;/p>
&lt;p>参数Return_type 可选。为一数字，它确定星期计算从哪一天开始，其默认值为1，其有两种系统：&lt;/p>
&lt;p>系统1包含本年度1月1日的周为本年度第一周，即为第1周。&lt;/p>
&lt;p>系统2包含本年度第一个星期四的周为本年度第一周，即为第一周。本系统基于ISO 8601，即为欧洲星期计数系统。&lt;/p>
&lt;h4 id="14workday">14.Workday&lt;/h4>
&lt;p>功能：返回在某日期（起始日期）之前或之后、与该日期相隔指定工作日的某一日期的日期值。&lt;/p>
&lt;p>语法：WORKDAY(start_date, days, [holidays])&lt;/p>
&lt;p>释义：Start_date必需。一个代表开始日期的日期。
Days 为正值将生成未来日期；为负值生成过去日期。&lt;/p>
&lt;h4 id="15year">15.Year&lt;/h4>
&lt;p>功能：返回日期的年份值，一个1900-9999之间的数字。&lt;/p>
&lt;p>语法：YEAR(serial_number)&lt;/p>
&lt;p>释义：Serial_number 为一个日期值，其中包含要查找的年份&lt;/p>
&lt;h4 id="16datedif">16.Datedif&lt;/h4>
&lt;p>功能: DATEDIF函数是Excel隐藏函数，其在帮助和插入公式里面没有。返回两个日期之间的年月日间隔数。&lt;/p>
&lt;p>语法: DATEDIF(start_date,end_date,unit)&lt;/p>
&lt;p>释义: Start_date 为一个日期，它代表时间段内的第一个日期或起始日期。(起始日期必须在1900年之后)&lt;/p>
&lt;p>End_date 为一个日期，它代表时间段内的最后一个日期或结束日期。&lt;/p>
&lt;p>Unit 为所需信息的返回类型。&lt;/p>
&lt;p>=DATEDIF(A1,TODAY(),&amp;ldquo;Y&amp;rdquo;)计算年数差
=DATEDIF(A1,TODAY(),&amp;ldquo;M&amp;rdquo;)计算月数差
=DATEDIF(A1,TODAY(),&amp;ldquo;D&amp;rdquo;)计算天数差
&amp;ldquo;MD&amp;rdquo; 起始日期与结束日期的同月间隔天数。
&amp;ldquo;YD&amp;rdquo; 起始日期与结束日期的同年间隔天数。
&amp;ldquo;YM&amp;rdquo; 起始日期与结束日期的同年间隔月数。&lt;/p>
&lt;h2 id="文本函数">文本函数&lt;/h2>
&lt;p>文本中提取字符&lt;/p>
&lt;h4 id="left">left&lt;/h4>
&lt;p>=LEFT(text, [num_chars])
其中text为要取得给定值的文本数据源，
num_chars表示需要从左开始算提取几个字符数，其中每个字符按1计数。&lt;/p>
&lt;p>例如“=LEFT(12345678,3)”，表示从字符”12345678“中取前三位字符，运行的结果为123。&lt;/p>
&lt;h4 id="right">right&lt;/h4>
&lt;p>=RIGHT(text,[num_chars])，&lt;/p>
&lt;p>text为要取得给定值的文本数据源
num_chars表示需要从右开始算提取几个字符数，其中每个字符按1计数。&lt;/p>
&lt;p>如下“=RIGHT(E3,4)”，表示从产品编号“sh3137200”中取后四位编码，运行的结果为“7200”&lt;/p>
&lt;h4 id="mid">mid&lt;/h4>
&lt;p>=MID(text, start_num, num_chars)，其中text为要取得给定值的文本数据源，
start_num表示指定从第几位开始提取，
num_chars表示需要从指定位置开始算提取几个字符数，其中每个字符按1计数。例如：“=MID(E3,3,3)”表示从产品编号”sh3137200“中的第三位开始取三位字符，运行的结果为313。&lt;/p>
&lt;h4 id="len函数">len函数&lt;/h4>
&lt;p>语法：len(文本)&lt;/p>
&lt;p>作用：返回文本中字符串的个数&lt;/p>
&lt;p>文本合并
获取文本信息&lt;/p>
&lt;h4 id="find函数find函数指对要查找的文本进行定位以确定其位置">Find函数Find函数指对要查找的文本进行定位，以确定其位置。&lt;/h4>
&lt;p>Find函数的语法格式：=Find(find_text,within_text,start_num)Find（要查找的文本，文本所在的单元格，从第几个字符开始查找[可选，省略默认为1，从第一个开始查找]）。
&lt;a href="mailto:764911118@qq.com">764911118@qq.com&lt;/a>
=find(&amp;ldquo;1&amp;rdquo;,A1,1) 3&lt;/p>
&lt;h4 id="2search函数">2.search函数&lt;/h4>
&lt;p>语法：search(要查找的字符串，文本，[从左起第几个查找])&lt;/p>
&lt;p>作用：返回一个字符串在另一个字符串中出现的位置（不区分大小写）&lt;/p>
&lt;h4 id="3replace函数">3.replace函数&lt;/h4>
&lt;p>语法：replace(文本，从左起第几个，替换几个，新的字符)&lt;/p>
&lt;p>作用：将一个字符串的部分字符替换成另一个字符串&lt;/p>
&lt;p>三、英文大小写函数&lt;/p>
&lt;h4 id="1upper函数">1.upper函数&lt;/h4>
&lt;p>语法：upper(英文文本)&lt;/p>
&lt;p>作用：将所有的英文字符转化成大写&lt;/p>
&lt;h4 id="2lower函数">2.lower函数&lt;/h4>
&lt;p>语法：lower(英文文本)&lt;/p>
&lt;p>作用：将所有的英文字符转化成小写&lt;/p>
&lt;h4 id="3proper函数">3.proper函数&lt;/h4>
&lt;p>语法：proper(英文文本)&lt;/p>
&lt;p>作用：将英文字符转化首字母大写，其余小写&lt;/p>
&lt;p>文本清洗&lt;/p>
&lt;h4 id="1trim函数">1.trim函数&lt;/h4>
&lt;p>语法：trim(文本)&lt;/p>
&lt;p>作用：除了保留字符之间的单个空格外，移除其余所有空格&lt;/p>
&lt;h4 id="2text函数">2.text函数&lt;/h4>
&lt;p>语法：text(数字，要转化成的文本格式 )&lt;/p>
&lt;p>作用：将数值转成指定格式的文本&lt;/p>
&lt;p>2019/1/2
text(A1,&amp;ldquo;mm月dd日&amp;rdquo;)&lt;/p>
&lt;p>##数字函数&lt;/p>
&lt;h4 id="sum">sum&lt;/h4>
&lt;h4 id="sumif">sumif&lt;/h4>
&lt;p>sumifs
rand
randbetween
round&lt;/p>
&lt;p>取绝对值
=abs(数字)&lt;/p>
&lt;p>取整
=int(数字)&lt;/p>
&lt;p>四舍五入
=round(数字)&lt;/p>
&lt;p>##统计函数&lt;/p>
&lt;p>counta
countif
countifs
average
averageif
averageifs
large
small
max
min
median
modd
rank&lt;/p>
&lt;p>##逻辑函数
if
iferror&lt;/p>
&lt;p>=IFERROR(A2/B2,&amp;quot;&amp;quot;)&lt;/p>
&lt;p>说明：如果是错误值则显示为空，否则正常显示。
and
or
ture
false&lt;/p>
&lt;p>##查找引用函数
index
match
lookup
vlookup
VLOOKUP函数语法：
=VLOOKUP(查找值,在哪个区域查找,返回区域第几列,精确或模糊匹配)&lt;/p>
&lt;p>第4参数为0时为精确匹配，1时为模糊匹配。
hlookup
row
column
choose
indirect
offset&lt;/p></description></item><item><title>jupyter notebook--使用方法</title><link>http://localhost:1313/post/jupter-notebook-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/</link><pubDate>Tue, 01 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/jupter-notebook-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>改变页面显示字体&lt;/li>
&lt;li>页面主题下载&lt;/li>
&lt;li>代码自动补全设置&lt;/li>
&lt;li>code,md 格式&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="改变页面显示字体">改变页面显示字体&lt;/h2>
&lt;ol>
&lt;li>改变浏览器字体&lt;/li>
&lt;li>pip install &amp;ndash; upgrade jupyterthemes&lt;/li>
&lt;/ol>
&lt;h2 id="页面主题下载">页面主题下载&lt;/h2>
&lt;ul>
&lt;li>cmd 查看主题 jt -l , 更改主题 jt -t oceans16&lt;/li>
&lt;li>恢复默认主题 jt -r&lt;/li>
&lt;li>设置主题参数
-t 设置主题，-f设置代码字体
jt -t oceans16 -f consolamono -nf robotosans -tf robotosans -N -T -cellw 60% -dfs 9 -ofs 9&lt;/li>
&lt;/ul>
&lt;h2 id="代码自动补全设置">代码自动补全设置&lt;/h2>
&lt;ul>
&lt;li>pip install jupyter_contrib_nbextensions 安装显示目录&lt;/li>
&lt;li>jupyter contrib nbextension install &amp;ndash;user &amp;ndash;skip-running-check 关闭jupyter notebook&lt;/li>
&lt;li>打开jupyter notebook, 选择 Nbextensions, 勾选Hinterland&lt;/li>
&lt;/ul>
&lt;h2 id="codemd-格式">code,md 格式&lt;/h2>
&lt;ul>
&lt;li>绿色-编辑模式&lt;/li>
&lt;li>m 进入markdown模式&lt;/li>
&lt;li>h 查看快捷键&lt;/li>
&lt;li>回车 命令模式-编辑模式&lt;/li>
&lt;li>esc 编辑模式-命令模式&lt;/li>
&lt;li>shift+enter 运行代码块并跳转下一个代码块&lt;/li>
&lt;li>ctrl + enter 只运行当前代码块&lt;/li>
&lt;li>alt + enter 运行代码块并在下方新建一个代码块&lt;/li>
&lt;li>蓝色-命令模式 m markdown单元格 y代码单元格 shift enter 渲染&lt;/li>
&lt;li>蓝色-命令模式 b 在下方创建代码块&lt;/li>
&lt;li>蓝色-命令模式 a 在上方创建代码块&lt;/li>
&lt;li>蓝色-命令模式 x 剪切 shift+v 粘贴到上面 v粘贴到当前代码块&lt;/li>
&lt;li>蓝色-命令模式 z恢复 d删除&lt;/li>
&lt;li>命令模式 l 给多行代码标行数&lt;/li>
&lt;li>c 复制单元格，v粘贴新的单元格&lt;/li>
&lt;li>$数学公式$&lt;/li>
&lt;/ul>
&lt;h2 id="markdown">markdown&lt;/h2>
&lt;ul>
&lt;li>
&lt;h1 id="一级标题">一级标题&lt;/h1>
&lt;/li>
&lt;li>
&lt;h2 id="二级标题">二级标题&lt;/h2>
&lt;/li>
&lt;li>
&lt;blockquote>
&lt;p>引用&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>加粗&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;em>斜体&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="www.baidu.com">百度&lt;/a> 链接&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;img src="link/w%E5%AE%BD%E5%BA%A6/1240" alt="腾讯视频"> 图片&lt;/p>
&lt;/li>
&lt;li>
&lt;p>@[toc] 文章目录&lt;/p>
&lt;/li>
&lt;li>
&lt;p>嵌入api&lt;/p>
&lt;/li>
&lt;/ul>
&lt;iframe frameborder='0' width='600' height='300'>
src =''
&lt;iframe>
源代码放入 html</description></item><item><title>MySQL(4)--常用函数总结</title><link>http://localhost:1313/post/mysql-4%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0/</link><pubDate>Tue, 01 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-4%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>单行函数&lt;/li>
&lt;li>分组函数&lt;/li>
&lt;li>窗口函数&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="单行函数">单行函数&lt;/h2>
&lt;h3 id="字符串函数">字符串函数&lt;/h3>
&lt;p>&lt;strong>1. length&lt;/strong>&lt;br>
获取参数值的字节个数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="k">LENGTH&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;katia哈密瓜&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="n">utf8中一个汉字3字节一个字母1字节&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">看系统编码方式：&lt;/span>
&lt;span class="k">SHOW&lt;/span> &lt;span class="n">VARIABLES&lt;/span> &lt;span class="k">LIKE&lt;/span> &lt;span class="s1">&amp;#39;%char%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>2. concat&lt;/strong>&lt;br>
拼接字符串&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">concat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;_&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="n">employee&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>3. upper/lower&lt;/strong>&lt;br>
大小写转换&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">concat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">upper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="k">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">first_name&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>4. substr/substring&lt;/strong> 根据索引截取字符&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">截取从指定索引处后面的所有字符&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">substr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;无敌爆炸产出&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">super&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">截取从指定索引处指定字符长度的字符&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">SUBSTR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;无敌爆炸产出&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">案例：名字中首字符大学，其他字符小写&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">CONCAT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">UPPER&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SUBSTR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)),&lt;/span>&lt;span class="k">LOWER&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SUBSTR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">last_name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employees&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>5. instr&lt;/strong> 返回字符串第一次出现的索引，找不到返回9&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">instr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;无敌爆炸产出&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;爆&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>6. trim&lt;/strong> 去掉字符前后的符号，没有规定符号的话默认去掉空格&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; 无敌 &amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="s1">&amp;#39;aaaa无aa敌aaa&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>7. lpad rpad&lt;/strong> 用指定的字符实现左填充指定长调度，超过的话从右边截断&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">lpad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;pikaqiu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;biu&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="n">biubpikaqiu&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">lpad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;pikaqiu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;biu&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span> &lt;span class="n">pi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>rpad从右实现，同理&lt;/p>
&lt;p>&lt;strong>8. replace&lt;/strong> 替换&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;司凤是男主吧&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;男&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;女&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数学函数">数学函数&lt;/h2>
&lt;h3 id="1-round">&lt;strong>1. round&lt;/strong>&lt;/h3>
&lt;p>四舍五入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="err">默认保留&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="err">位小数&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="err">保留一位小数&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-ceil-floor">&lt;strong>2. ceil, floor&lt;/strong>&lt;/h3>
&lt;p>向上取整 返回整数&amp;gt;=该参数最小整数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">ceil&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">054&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">ceil&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">054&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="o">#-&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>floor 向下取整 返回整数&amp;lt;=该参数最小整数&lt;/p>
&lt;h3 id="3-truncate">&lt;strong>3. truncate&lt;/strong>&lt;/h3>
&lt;p>截断&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">truncate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">1415926&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">保留一位小数&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-mod">&lt;strong>4. mod&lt;/strong>&lt;/h3>
&lt;p>求余数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">mod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="日期函数">日期函数&lt;/h2>
&lt;h3 id="1-返回时间">&lt;strong>1. 返回时间&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">now&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">curdate&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="err">只返回日期&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">curtime&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="err">只返回时间&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-字符日期转换">&lt;strong>2. 字符日期转换&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="n">date_format&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="err">将日期转换成字符&lt;/span>
&lt;span class="n">str_to_date&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="err">将字符转换成日期&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3获取指定的部分年月日等">&lt;strong>3.获取指定的部分：年、月、日等&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">Year&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">());&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">Year&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">first_login&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">players&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4monthname以英文的形式返回月">&lt;strong>4.monthname:以英文的形式返回月&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">monthname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">first_login&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">players&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5获取时间间隔">&lt;strong>5.获取时间间隔&lt;/strong>&lt;/h3>
&lt;p>datediff(date1,date2) date2-date1&lt;br>
tiemstamp()&lt;/p>
&lt;h2 id="流程控制函数">流程控制函数&lt;/h2>
&lt;h3 id="1-if函数">&lt;strong>1. if函数&lt;/strong>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;10&amp;gt;5&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;大&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;小&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-ifnull函数">&lt;strong>2. ifnull函数&lt;/strong>&lt;/h3>
&lt;p>ifnull(value1, value2)&lt;br>
如果value1不为空返回value1,否则返回value2&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">如果没有数学第二高的成绩，返回空值&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">ifnull&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">distinct&lt;/span> &lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">scores&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">score&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">scores&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;math&amp;#39;&lt;/span>&lt;span class="p">)),&lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">as&lt;/span> &lt;span class="s1">&amp;#39;TheSecondHighest_math_score&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-case函数">&lt;strong>3. case函数&lt;/strong>&lt;/h3>
&lt;ul>
&lt;li>等值判断&lt;br>
case 要判断的字段或表达式&lt;br>
when 常量1 then 要显示的值或语句;&lt;br>
when 常量2 then 要显示的值或语句;&lt;br>
&amp;hellip;&amp;hellip;.&lt;br>
else 常量n then 要显示的值或语句;&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">案例：查询员工的公司，要求&lt;/span> &lt;span class="err">部门号&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="err">，显示的工资&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">，&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">部门号&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="err">，显示的工资&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="err">，部门号&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="err">，显示的工资&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">...&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">salary&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="err">原始工资&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">department_id&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">CASE&lt;/span> &lt;span class="n">department_id&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="mi">30&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">salary&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="mi">40&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">salary&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="mi">50&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="n">salary&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;span class="k">ELSE&lt;/span> &lt;span class="n">salary&lt;/span>
&lt;span class="k">END&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">new_salary&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employees&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>类似多重if判断，用于判断区间&lt;br>
case&lt;br>
when 条件1 then 要显示的值或语句&lt;br>
when 条件2 then 要显示的值或语句&lt;br>
when 条件3 then 要显示的值或语句&lt;br>
&amp;hellip;&amp;hellip;&lt;br>
else 要显示的值或语句&lt;br>
end;&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">案例：查询员工工资情况，工资&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">20000&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">15000&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">B&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">C&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">否则&lt;/span>&lt;span class="n">D&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">salary&lt;/span>&lt;span class="p">,(&lt;/span>&lt;span class="err">这有个逗号&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">CASE&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="n">salary&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">20000&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="n">salary&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">15000&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>
&lt;span class="k">WHEN&lt;/span> &lt;span class="n">salary&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">10000&lt;/span> &lt;span class="k">THEN&lt;/span> &lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>
&lt;span class="k">ELSE&lt;/span> &lt;span class="s1">&amp;#39;D&amp;#39;&lt;/span>
&lt;span class="k">END&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="err">工资级别&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">employees&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="分组函数统计函数">分组函数/统计函数&lt;/h2>
&lt;h3 id="sumavgminmaxcount">&lt;strong>sum(),avg(),min(),max(),count()&lt;/strong>&lt;/h3>
&lt;ul>
&lt;li>sum,avg仅支持数值型，max,min支持字符型（按照首字母由A～Z的顺序排列，越往后，其值越大）&lt;/li>
&lt;li>与分组函数一同查询的字段是group by后的字段&lt;/li>
&lt;li>和distinct 搭配&lt;br>
select sum(distinct salary), sum(salary) from salaries;&lt;/li>
&lt;li>以上分组函数都忽略null&lt;/li>
&lt;/ul>
&lt;h2 id="窗口函数">窗口函数&lt;/h2>
&lt;h3 id="窗口函数功能">&lt;strong>窗口函数功能&lt;/strong>&lt;/h3>
&lt;p>window_function_name(expression)&lt;br>
OVER ([partition_defintion] [order_definition]&lt;br>
[frame_definition])&lt;/p>
&lt;p>&lt;strong>Frame子句&lt;/strong>&lt;br>
frame_type {boundaries} 子句用来定义子集的规则，通常用来作为滑动窗口使用&lt;/p>
&lt;ul>
&lt;li>
&lt;p>frame_type包括ROW、RANGE两种&lt;br>
row frame基于 physical offsets ，即基于当前行的位置的偏移量确定计算窗口大小&lt;br>
range frame基于 logical offsets ，即基于当前行的value值的偏移量来确定计算窗口大小&lt;/p>
&lt;/li>
&lt;li>
&lt;p>boundaries&lt;br>
UNBOUNDED PRECEDING ， 分区的第一行&lt;br>
N PRECEDING ，当前行的前向偏移量&lt;br>
CURRENT ROW , 当前行
N FOLLOWING ，当前行的后向偏移量&lt;br>
UNBOUNDED FOLLOWING , 表示分区的最后一行&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>静态窗口&lt;/strong> &amp;ndash;无frame功能&lt;br>
CUME_DIST(), DENSE_RANK(), LAG(),LEAD(),NTILE(), PERCENT_RANK(),RANK(),ROW_NUMBER()&lt;/p>
&lt;h3 id="1-序号函数">&lt;strong>1. 序号函数&lt;/strong>&lt;/h3>
&lt;p>&lt;strong>row_number、rank、dense_rank&lt;/strong>&lt;br>
rank() 排名重叠时，下一名次有间隔&lt;br>
dense_rank() 排名重叠时，下一名次无间隔&lt;br>
row_number() 依次排名递增&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">empno&lt;/th>
&lt;th style="text-align:center">ename&lt;/th>
&lt;th style="text-align:center">deptno&lt;/th>
&lt;th style="text-align:center">sal&lt;/th>
&lt;th style="text-align:center">num&lt;/th>
&lt;th style="text-align:center">rank&lt;/th>
&lt;th style="text-align:center">dense_rank&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">7839&lt;/td>
&lt;td style="text-align:center">KING&lt;/td>
&lt;td style="text-align:center">10&lt;/td>
&lt;td style="text-align:center">5000.00&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7782&lt;/td>
&lt;td style="text-align:center">CLARK&lt;/td>
&lt;td style="text-align:center">10&lt;/td>
&lt;td style="text-align:center">2450.00&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7934&lt;/td>
&lt;td style="text-align:center">MILLER&lt;/td>
&lt;td style="text-align:center">10&lt;/td>
&lt;td style="text-align:center">1300.00&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7788&lt;/td>
&lt;td style="text-align:center">SCOTT&lt;/td>
&lt;td style="text-align:center">20&lt;/td>
&lt;td style="text-align:center">3000.00&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7902&lt;/td>
&lt;td style="text-align:center">FORD&lt;/td>
&lt;td style="text-align:center">20&lt;/td>
&lt;td style="text-align:center">3000.00&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7566&lt;/td>
&lt;td style="text-align:center">JONES&lt;/td>
&lt;td style="text-align:center">20&lt;/td>
&lt;td style="text-align:center">2975.00&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7876&lt;/td>
&lt;td style="text-align:center">ADAMS&lt;/td>
&lt;td style="text-align:center">20&lt;/td>
&lt;td style="text-align:center">1100.00&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7369&lt;/td>
&lt;td style="text-align:center">SMITH&lt;/td>
&lt;td style="text-align:center">20&lt;/td>
&lt;td style="text-align:center">800.00&lt;/td>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7698&lt;/td>
&lt;td style="text-align:center">BLAKE&lt;/td>
&lt;td style="text-align:center">30&lt;/td>
&lt;td style="text-align:center">2850.00&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7499&lt;/td>
&lt;td style="text-align:center">ALLEN&lt;/td>
&lt;td style="text-align:center">30&lt;/td>
&lt;td style="text-align:center">1600.00&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7844&lt;/td>
&lt;td style="text-align:center">TURNER&lt;/td>
&lt;td style="text-align:center">30&lt;/td>
&lt;td style="text-align:center">1500.00&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7521&lt;/td>
&lt;td style="text-align:center">WARD&lt;/td>
&lt;td style="text-align:center">30&lt;/td>
&lt;td style="text-align:center">1250.00&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7654&lt;/td>
&lt;td style="text-align:center">MARTIN&lt;/td>
&lt;td style="text-align:center">30&lt;/td>
&lt;td style="text-align:center">1250.00&lt;/td>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7900&lt;/td>
&lt;td style="text-align:center">JAMES&lt;/td>
&lt;td style="text-align:center">30&lt;/td>
&lt;td style="text-align:center">950.00&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">5&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="2-分布函数">&lt;strong>2. 分布函数&lt;/strong>&lt;/h3>
&lt;p>&lt;strong>percent_rank()/cume_dist()&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>percent_rank()：(rank - 1) / (rows - 1)&lt;br>
rank为RANK()函数产生的序号，rows为当前窗口的记录总行数。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>cume_dist()&lt;br>
用途：分组内小于等于当前rank值的行数/分组内总行数&lt;br>
应用场景：大于等于当前订单金额的订单比例有多少&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="3-前后函数">&lt;strong>3. 前后函数&lt;/strong>&lt;/h3>
&lt;p>&lt;strong>lead(expre,n)/lag(expre,n)&lt;/strong>&lt;br>
用途：分区中位于当前行前n行（lead）/后n行(lag)的记录值。&lt;br>
使用场景：查询上一个订单距离当前订单的时间间隔。&lt;/p>
&lt;h3 id="4-头尾函数">&lt;strong>4. 头尾函数&lt;/strong>&lt;/h3>
&lt;p>&lt;strong>first_val(expr)/last_val(expr)&lt;/strong>&lt;br>
用途：得到分区中的第一个/最后一个指定参数的值。&lt;br>
使用场景：查询截止到当前订单，按照日期排序第一个订单和最后一个订单的订单金额。&lt;/p>
&lt;h3 id="5-其他函数">&lt;strong>5. 其他函数&lt;/strong>&lt;/h3>
&lt;p>nth_value(expr,n)/nfile(n）&lt;/p>
&lt;ul>
&lt;li>
&lt;p>nth_value(expr,n)&lt;br>
用途：返回窗口中第N个expr的值，expr可以是表达式，也可以是列名。
应用场景：每个用户订单中显示本用户金额排名第二和第三的订单金额。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>nfile(n)&lt;br>
用途：将分区中的有序数据分为n个桶，记录桶号。&lt;br>
应用场景：将每个用户的订单按照订单金额分成3组。
mysql&amp;gt; SELECT
-&amp;gt; NTILE(3) OVER w AS nf,
-&amp;gt; stu_id, lesson_id, score
-&amp;gt; FROM t_score
-&amp;gt; WHERE lesson_id IN (&amp;lsquo;L001&amp;rsquo;,&amp;lsquo;L002&amp;rsquo;)
-&amp;gt; WINDOW w AS (PARTITION BY lesson_id ORDER BY score)
-&amp;gt; ;&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="6-聚合函数作为窗口函数">&lt;strong>6. 聚合函数作为窗口函数&lt;/strong>&lt;/h3>
&lt;p>用途：在窗口中每条记录动态应用聚合函数(sum/avg/max/min/count)，可以动态计算在指定的窗口内的各种聚合函数值。&lt;br>
应用场景：每个用户按照订单id，截止到当前的累计订单金额/平均订单金额/最大订单金额/最小订单金额/订单数是多少？&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">order_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">user_no&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">amount&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">sum1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">avg1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">max1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">count1&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="k">order&lt;/span>
&lt;span class="n">window&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">partition&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">user_no&lt;/span> &lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">order_id&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参考链接：http://www.cnblogs.com/DataArt/p/9961676.html&lt;/p></description></item><item><title>MySQL(5)--case when 运用计算</title><link>http://localhost:1313/post/mysql-5%E5%B8%A6%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E7%9A%84%E8%AE%A1%E7%AE%97/</link><pubDate>Tue, 01 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-5%E5%B8%A6%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E7%9A%84%E8%AE%A1%E7%AE%97/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>case when 在带条件筛选中的运用&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="输出占比">输出占比&lt;/h2>
&lt;p>统计每个班同学各科成绩平均分大于80分的人数和人数占比&lt;br>
table student: name, id, class, age, major&lt;br>
table score: id, class_id, score&lt;/p>
&lt;p>（1）每位同学的平均成绩&lt;br>
（2）平均分大于80分的人数&lt;br>
（3）平均分大于80分的人数占比&lt;br>
（4）输出结果是班级，平均分大于80分的人数，平均分大于80分的人数占比&lt;/p>
&lt;p>-每位同学的平均成绩&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">avg_score&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>-平均分大于80分的人数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">avg_score&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>-平均分大于80分的人数占比&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>
&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">percentage&lt;/span>
&lt;span class="k">from&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">avg_score&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>-输出结果是班级、人数、人数占比&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">percentage&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">student&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">s&lt;/span>
&lt;span class="k">left&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="k">class&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>-综合&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="k">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">percentage&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">student&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="k">left&lt;/span> &lt;span class="k">join&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">avg_score&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>模板总结： 有筛选条件的统计数量问题&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">sum&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="k">when&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">判断表达式&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="k">else&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="err">数量&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://files.catbox.moe/dhgyoy.png" alt="">&lt;/p></description></item><item><title>MySQL(6)--select执行语句顺序</title><link>http://localhost:1313/post/msyql-6%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</link><pubDate>Tue, 01 Sep 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/msyql-6%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>select-&amp;gt; from-&amp;gt; where-&amp;gt; group by-&amp;gt; max()-&amp;gt; having-&amp;gt; order by&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">max_score&lt;/span>
&lt;span class="k">from&lt;/span> &lt;span class="n">grade&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="k">not&lt;/span> &lt;span class="k">null&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">name&lt;/span>
&lt;span class="k">having&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">600&lt;/span>
&lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">max_score&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>select-&amp;gt; from-&amp;gt; where-&amp;gt; group by-&amp;gt; max()-&amp;gt; having-&amp;gt; order by&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>首先执行from子句,从grade表的数据源&lt;/li>
&lt;li>执行where语句，筛选grade表中不为null的数据&lt;/li>
&lt;li>执行group by 语句，把grade表按name分组&lt;br>
&lt;strong>(此处才可以使用select中的别名)&lt;/strong>&lt;/li>
&lt;li>计算max()聚集函数，从score中分组筛选最大数值&lt;/li>
&lt;li>执行having子句，筛选score大于600分的数据&lt;/li>
&lt;li>执行order by 子句，结果按照max_score列排序&lt;/li>
&lt;/ul></description></item><item><title>MySQL(1)--最值处理</title><link>http://localhost:1313/post/mysql-1%E6%9C%80%E5%80%BC%E5%A4%84%E7%90%86/</link><pubDate>Mon, 31 Aug 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-1%E6%9C%80%E5%80%BC%E5%A4%84%E7%90%86/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>order by + limit offset&lt;/li>
&lt;li>大于等于 max()&lt;/li>
&lt;li>group by 分组聚合&lt;/li>
&lt;li>最值比较 any, all&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="order-by--limit">order by + limit&lt;/h2>
&lt;p>&lt;strong>使用：不需要分组的情况下取出最值&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">成绩倒叙排列，取出第一名&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">scores&lt;/span>
&lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="k">desc&lt;/span>
&lt;span class="k">limit&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>拓展：函数定义&lt;/strong>&lt;/p>
&lt;p>获取 Employee 表中第 n 高的薪水（Salary）&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;center>Id&lt;/center>&lt;/th>
&lt;th style="text-align:center">&lt;center>Salary &lt;/center>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">100&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">200&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">300&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span> &lt;span class="err">函数定义&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="err">为变量赋值&lt;/span>
&lt;span class="k">CREATE&lt;/span> &lt;span class="k">FUNCTION&lt;/span> &lt;span class="n">getNthHighestSalary&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">N&lt;/span> &lt;span class="nb">INT&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">RETURNS&lt;/span> &lt;span class="nb">INT&lt;/span>
&lt;span class="k">BEGIN&lt;/span>
&lt;span class="k">SET&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">RETURN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">salary&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">employee&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">salary&lt;/span>
&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">salary&lt;/span> &lt;span class="k">DESC&lt;/span>
&lt;span class="k">LIMIT&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">END&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="max函数">max()函数&lt;/h2>
&lt;p>&lt;strong>使用：group by + max()&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">班级分组聚合，取出最值&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">scores&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>拓展：取出第二名成绩&lt;/strong>
使用：max()返回最大值作为虚拟表&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">distinct&lt;/span> &lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">scores&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">distinct&lt;/span> &lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">scores&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意：分组聚合返回两列值(分组列和聚合列)&lt;/p>
&lt;p>&lt;strong>拓展: 子查询对应关系 表连接取最值&lt;/strong>&lt;/p>
&lt;p>Employee 表包含所有员工信息，每个员工有其对应的 Id, salary 和 department Id&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Id&lt;/th>
&lt;th style="text-align:center">Name&lt;/th>
&lt;th style="text-align:center">Salary&lt;/th>
&lt;th style="text-align:center">DepartmentId&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Joe&lt;/td>
&lt;td style="text-align:center">70000&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Henry&lt;/td>
&lt;td style="text-align:center">80000&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">Sam&lt;/td>
&lt;td style="text-align:center">60000&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">Max&lt;/td>
&lt;td style="text-align:center">90000&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Department 表包含公司所有部门的信息。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Id&lt;/th>
&lt;th style="text-align:center">Name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">IT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Sales&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>找出每个部门工资最高的员工&lt;/p>
&lt;p>思路：&lt;br>
对employee表分组聚合取出每个部门的最高员工工资&lt;br>
内连接两表 并用子查询限定 部门和最高员工工资的关系&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span>
&lt;span class="n">Department&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">NAME&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Department&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">Employee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">NAME&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Employee&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">Salary&lt;/span>
&lt;span class="k">FROM&lt;/span>
&lt;span class="n">Employee&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Department&lt;/span>
&lt;span class="k">WHERE&lt;/span>
&lt;span class="n">Employee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DepartmentId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Department&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span>
&lt;span class="k">AND&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">Employee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DepartmentId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Salary&lt;/span> &lt;span class="p">)&lt;/span>
&lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">DepartmentId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="n">Salary&lt;/span> &lt;span class="p">)&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">Employee&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">DepartmentId&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>拓展：分组聚合作为虚拟表 再次分组聚合&lt;/strong>&lt;/p>
&lt;p>编写一个 SQL 查询，以查询从今天起最多 90 天内，每个日期该日期首次登录的用户数。
假设今天是 2019-06-30.
Traffic 表：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;center>user_id&lt;/center>&lt;/th>
&lt;th style="text-align:center">&lt;center>activity&lt;/center>&lt;/th>
&lt;th style="text-align:center">&lt;center>activity_date &lt;/center>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">login&lt;/td>
&lt;td style="text-align:center">2019-05-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">homepage&lt;/td>
&lt;td style="text-align:center">2019-05-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">logout&lt;/td>
&lt;td style="text-align:center">2019-05-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">login&lt;/td>
&lt;td style="text-align:center">2019-06-21&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">logout&lt;/td>
&lt;td style="text-align:center">2019-06-21&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">login&lt;/td>
&lt;td style="text-align:center">2019-01-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">jobs&lt;/td>
&lt;td style="text-align:center">2019-01-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">logout&lt;/td>
&lt;td style="text-align:center">2019-01-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">login&lt;/td>
&lt;td style="text-align:center">2019-06-21&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">groups&lt;/td>
&lt;td style="text-align:center">2019-06-21&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">logout&lt;/td>
&lt;td style="text-align:center">2019-06-21&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">login&lt;/td>
&lt;td style="text-align:center">2019-03-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">logout&lt;/td>
&lt;td style="text-align:center">2019-03-01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">login&lt;/td>
&lt;td style="text-align:center">2019-06-21&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">logout&lt;/td>
&lt;td style="text-align:center">2019-06-21&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>来源：力扣（LeetCode）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">用户&lt;/span>&lt;span class="n">id分组&lt;/span>&lt;span class="err">，取出每位用户最早登陆时间作为虚拟表&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">限制时间条件&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">虚拟表中以最早登陆时间分组，对用户&lt;/span>&lt;span class="n">id计数&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">login_date&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">user_count&lt;/span>
&lt;span class="k">from&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">user_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">activity_date&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">login_date&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">Traffic&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">activity&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;login&amp;#39;&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">user_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">t&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">datediff&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;2019-06-30&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">login_date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="mi">90&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">login_date&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="any-all关键字">any, all关键字&lt;/h2>
&lt;p>&lt;strong>any&lt;/strong> 标识主查询的条件为满足子查询返回查询结果中任意一条数据记录&lt;/p>
&lt;p>匹配模式：&lt;/p>
&lt;ol>
&lt;li>=any 等同于in关键字&lt;/li>
&lt;li>大于或大于等于any 比子查询返回的最小数据 要大的数据&lt;/li>
&lt;li>小于或小于等于any 比子查询返回的最大数据 要小的数据&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>all&lt;/strong> 表示主查询的条件为满足子查询返回结果中的所有记录&lt;/p>
&lt;p>匹配模式：&lt;/p>
&lt;ol>
&lt;li>大于或大于等于all 大于所有&lt;/li>
&lt;li>小于或小于等于all 小于所有&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">查询雇员中的姓名和工资，这些雇员的工资不低于职位为&lt;/span>&lt;span class="n">manager的工资&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sal&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">sal&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="k">any&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">sal&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">job&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;manager&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">查询雇员的姓名和工资，这些雇员的工资高于职位为&lt;/span>&lt;span class="n">manager的工资&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sal&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">sal&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="k">all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">select&lt;/span> &lt;span class="n">sal&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">job&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;manager&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>MySQL(2)--日期函数及格式</title><link>http://localhost:1313/post/msyql-2%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/</link><pubDate>Mon, 31 Aug 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/msyql-2%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>datediff(),tiemstamp()&lt;/li>
&lt;li>日期格式&lt;/li>
&lt;li>限制日期条件&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="时间函数">时间函数&lt;/h2>
&lt;p>datediff(date1,date2)=date1-date2&lt;/p>
&lt;p>timestampdiff(timetype,date1,date2)=date2-date1&lt;br>
timetype = &amp;lsquo;day&amp;rsquo;,&amp;lsquo;hour&amp;rsquo;,&amp;lsquo;second&amp;rsquo;&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">找出第二天销售额多余第一天销售额的日期和销售额，产品&lt;/span>&lt;span class="n">id&lt;/span>
&lt;span class="k">Select&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">amount&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">sales&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="k">cross&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">sales&lt;/span> &lt;span class="n">b&lt;/span>
&lt;span class="k">On&lt;/span> &lt;span class="n">diffdate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">date&lt;/span> &lt;span class="err">–&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">date&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;span class="k">Where&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">amount&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="err">；&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="日期格式">日期格式&lt;/h2>
&lt;p>&lt;strong>DATE_FORMA(date, format)&lt;/strong> 日期格式转换成字符串
&lt;strong>str_to_data&lt;/strong> 字符串转换成日期格式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="n">date_format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pay_date&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;%Y-%m&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">pay_month&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>%S,%s 两位数字形式的秒（ 01, . . ., 59）&lt;br>
%i 两位数字形式的分&lt;br>
%H 两位数字形式的小时，24 小时&lt;br>
%h, %I 两位数字形式的小时，12 小时（01,02, . . ., 12）&lt;br>
%k 数字形式的小时，24 小时（0,1, . . ., 23）&lt;br>
%l 数字形式的小时，12 小时（1, 2, . . ., 12）&lt;br>
%T 24 小时的时间形式（h h : m m : s s）&lt;br>
%r 12 小时的时间形式（hh:mm:ss AM 或hh:mm:ss PM）&lt;br>
%p AM 或P M&lt;br>
%W 一周中每一天的名称（ S u n d a y, Monday, . . ., Saturday）&lt;br>
%a 一周中每一天名称的缩写（ Sun, Mon, . . ., Sat）&lt;br>
%d 两位数字表示月中的天数（ 00, 01, . . ., 31）&lt;br>
%e 数字形式表示月中的天数（ 1, 2， . . ., 31）&lt;br>
%D 英文后缀表示月中的天数（ 1st, 2nd, 3rd, . . .）&lt;br>
%w 以数字形式表示周中的天数（ 0 = S u n d a y, 1=Monday, . . ., 6=Saturday）&lt;br>
%j 以三位数字表示年中的天数（ 001, 002, . . ., 366）&lt;br>
% U 周（0, 1, 52），其中Sunday 为周中的第一天&lt;br>
%u 周（0, 1, 52），其中Monday 为周中的第一天&lt;br>
%M 月名（J a n u a r y, February, . . ., December）&lt;br>
%b 缩写的月名（ J a n u a r y, February, . . ., December）&lt;br>
%m 两位数字表示的月份（ 01, 02, . . ., 12）&lt;br>
%c 数字表示的月份（ 1, 2, . . ., 12）&lt;br>
%Y 四位数字表示的年份&lt;br>
%y 两位数字表示的年份&lt;br>
%% 直接值“%”&lt;/p>
&lt;h2 id="时间段筛选">时间段筛选&lt;/h2>
&lt;p>&lt;strong>max(),min() 创建时间段&lt;/strong>&lt;/p>
&lt;p>报告2019年春季才售出的产品。
即仅在2019-01-01至2019-03-31（含）之间出售的商品。&lt;/p>
&lt;p>table product:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">product_id&lt;/th>
&lt;th style="text-align:center">product_name&lt;/th>
&lt;th style="text-align:center">unit_price&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">S8&lt;/td>
&lt;td style="text-align:center">1000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">G4&lt;/td>
&lt;td style="text-align:center">800&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">iPhone&lt;/td>
&lt;td style="text-align:center">1400&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>sales table:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">seller_id&lt;/th>
&lt;th style="text-align:center">product_id&lt;/th>
&lt;th style="text-align:center">buyer_id&lt;/th>
&lt;th style="text-align:center">sale_date&lt;/th>
&lt;th style="text-align:center">quantity&lt;/th>
&lt;th style="text-align:center">price&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2019-01-21&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2019-02-17&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">800&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">2019-06-02&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">800&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">2019-05-13&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">2800&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">产品分组，&lt;/span>&lt;span class="n">having筛选出时间最值&lt;/span>
&lt;span class="k">select&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">product_name&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">product&lt;/span> &lt;span class="n">p&lt;/span>
&lt;span class="k">inner&lt;/span> &lt;span class="k">join&lt;/span> &lt;span class="n">sales&lt;/span> &lt;span class="n">s&lt;/span>
&lt;span class="k">on&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">product_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">product_id&lt;/span>
&lt;span class="k">group&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">product_id&lt;/span>
&lt;span class="k">having&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sale_date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="s1">&amp;#39;2019-03-31&amp;#39;&lt;/span> &lt;span class="k">and&lt;/span> &lt;span class="k">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sale_date&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="s1">&amp;#39;2019-01-01&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>between &amp;lsquo;date1&amp;rsquo; and &amp;lsquo;date2&amp;rsquo;&lt;/strong>&lt;/p></description></item><item><title>MySQL(3)--排名问题</title><link>http://localhost:1313/post/mysql-3%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 31 Aug 2020 00:00:00 +0000</pubDate><guid>http://localhost:1313/post/mysql-3%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98/</guid><description>&lt;blockquote>
&lt;ul>
&lt;li>Top N&lt;/li>
&lt;li>分组排名,每组前几名&lt;/li>
&lt;li>组内比较(最值问题)&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h5 id="top-n-查找前20的数据">Top N 查找前20%的数据&lt;/h5>
&lt;p>用户访问次数表 visit，列名包括user_id、user_type、visit_time。&lt;br>
要求在剔除访问次数前20%的用户后，每类用户的平均访问次数&lt;/p>
&lt;p>1）找出访问次数前20%的用户&lt;br>
2）剔除访问次数前20%的用户&lt;br>
3）每类用户的平均访问次数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="o">#&lt;/span>&lt;span class="err">窗口函数给用户访问量排名&lt;/span>
&lt;span class="k">Select&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">from&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="k">Select&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">row_number&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">over&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">order&lt;/span> &lt;span class="k">by&lt;/span> &lt;span class="n">visit_time&lt;/span> &lt;span class="k">desc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">rank&lt;/span>
&lt;span class="k">From&lt;/span> &lt;span class="n">visit&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">where&lt;/span> &lt;span class="n">rank&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rank&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">剔除前&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="o">%&lt;/span>
&lt;span class="k">Select&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="k">where&lt;/span> &lt;span class="n">rank&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">Select&lt;/span> &lt;span class="k">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rank&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="o">#&lt;/span>&lt;span class="err">每类用户的平均访问次数&lt;/span> &lt;span class="err">分组聚合&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="k">AVG&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">visit_time&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="k">type&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">row_number&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">OVER&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">visit_time&lt;/span> &lt;span class="k">DESC&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">rank&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">visit&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="n">a&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">rank&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="k">MAX&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rank&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">a&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="n">b&lt;/span>
&lt;span class="k">GROUP&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="k">type&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="每组前三名的薪水">每组前三名的薪水&lt;/h5>
&lt;p>找出每个部门获得前三高工资的所有员工&lt;/p>
&lt;p>employee:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Id&lt;/th>
&lt;th style="text-align:center">Name&lt;/th>
&lt;th style="text-align:center">Salary&lt;/th>
&lt;th style="text-align:center">DepartmentId&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">Joe&lt;/td>
&lt;td style="text-align:center">85000&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Henry&lt;/td>
&lt;td style="text-align:center">80000&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">3&lt;/td>
&lt;td style="text-align:center">Sam&lt;/td>
&lt;td style="text-align:center">60000&lt;/td>
&lt;td style="text-align:center">2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">4&lt;/td>
&lt;td style="text-align:center">Max&lt;/td>
&lt;td style="text-align:center">90000&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">5&lt;/td>
&lt;td style="text-align:center">Janet&lt;/td>
&lt;td style="text-align:center">69000&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">6&lt;/td>
&lt;td style="text-align:center">Randy&lt;/td>
&lt;td style="text-align:center">85000&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">7&lt;/td>
&lt;td style="text-align:center">Will&lt;/td>
&lt;td style="text-align:center">70000&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>department:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Id&lt;/th>
&lt;th style="text-align:center">Name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">IT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">2&lt;/td>
&lt;td style="text-align:center">Sales&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>窗口函数解法&lt;/p>
&lt;p>先对Employee表进行部门分组工资排名&lt;br>
再关联Department表查询部门名称&lt;br>
再使用WHERE筛选出排名小于等于3的数据&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Department&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">Employee&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Salary&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="k">SELECT&lt;/span> &lt;span class="n">DENSE_RANK&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">OVER&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">PARTITION&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">DepartmentId&lt;/span>
&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">Salary&lt;/span> &lt;span class="k">DESC&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">ranking&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DepartmentId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Salary&lt;/span>
&lt;span class="k">FROM&lt;/span> &lt;span class="n">Employee&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="n">A&lt;/span>
&lt;span class="k">JOIN&lt;/span> &lt;span class="n">Department&lt;/span> &lt;span class="n">B&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DepartmentId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;span class="k">WHERE&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ranking&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>